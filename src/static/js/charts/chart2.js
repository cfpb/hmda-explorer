  $(document).ready(function() {

      if ($('#hmda_chart_2').length !== 0) {
          var originationsByTypeChart = new Highcharts.Chart(chart2_options);
      }

      if ($('#hmda_chart_2_msa').length !== 0) {
          $('#hmda_chart_2_msa').chosen({
              width: '100%'
          });
      }

      var chart2DataObj = {
        "U.S. Total":{"name":"U.S. Total","data":[[54.8127238288199,61.271225069736815,62.449780550998994],[28.49762260826488,22.0960778856911,19.930282666049745],[9.430594148450682,9.696677652651127,10.863896586331474],[7.259059414464546,6.93601939192096,6.756040196619783]]},
        "Alabama":{"name":"Alabama","data":[[49.340675695788065,55.20679369003789,57.30447745301602],[27.983330852805476,22.998575689984143,20.41207474844274],[12.13573448429826,12.394184515331489,13.057019645424054],[10.5402589671082,9.400446104646477,9.22642815311718]]},
        "Alaska":{"name":"Alaska","data":[[43.83797759264579,47.210796915167094,48.1789293571254],[26.730824475725367,22.017994858611825,19.652896602297727],[25.23700086182132,26.195372750642676,27.646052309948665],[4.194197069807527,4.5758354755784065,4.522121730628208]]},
        "Arizona":{"name":"Arizona","data":[[45.558943426242,51.13538582700132,50.65121637189131],[37.92463460709906,32.54189333061093,31.77881683268957],[12.091936499519438,12.834162206309157,13.962187436470828],[4.424485467139496,3.48855863607858,3.607779358948296]]},
        "Arkansas":{"name":"Arkansas","data":[[48.55726281936752,55.54785586173162,55.905643775924915],[25.723601929605145,20.764715473667046,19.051409896509824],[8.9422905127747,9.44073047448231,10.931411572464071],[16.776844738252635,14.246698190119028,14.111534755101186]]},
        "California":{"name":"California","data":[[55.92796774627919,66.10909889976662,67.14789934247788],[35.251764370410854,25.55125329615373,23.00877321300641],[7.070155011128801,6.970796835692419,8.563541092319406],[1.7501128721811656,1.3688509683872336,1.2797863521963038]]},
        "Colorado":{"name":"Colorado","data":[[56.278030459105246,63.54620664457029,64.28919182083739],[28.88226810985563,22.201633739593394,20.09858812074002],[12.389661019635188,12.331341180155023,13.62950340798442],[2.45004041140394,1.9208184356812903,1.9827166504381692]]},
        "Connecticut":{"name":"Connecticut","data":[[64.66282894736842,69.95158074622616,73.03391587677726],[28.885690789473685,23.22344061520934,19.26466232227488],[3.951480263157895,4.176160637994873,4.965195497630331],[2.5,2.6488180005696385,2.736226303317536]]},
        "Delaware":{"name":"Delaware","data":[[46.8671679197995,54.95961635537607,57.46321784527765],[32.24728487886382,25.959111559818272,22.271001423825343],[10.707323865218601,9.729934376577486,12.33981964878975],[10.178223336118073,9.351337708228167,7.925961082107262]]},
        "District of Columbia":{"name":"District of Columbia","data":[[74.51290152711954,82.81592975854501,86.01091239769627],[20.27382833070037,12.402006898714331,9.154289178538951],[5.213270142180095,4.7820633427406705,4.834798423764777],[0,0,0]]},
        "Florida":{"name":"Florida","data":[[48.38860382617509,57.849896972578854,59.8047488390547],[35.54969593310528,27.383499762244412,24.34268981665167],[11.771506398074242,11.992788080519892,13.290378823016614],[4.290193842645381,2.7738151846568395,2.5621825212770117]]},
        "Georgia":{"name":"Georgia","data":[[46.618095308898965,55.0160913737616,56.114624727150606],[36.90580625975764,27.956080015144824,25.42116751553143],[11.957475280648278,11.953051050672052,13.657581015279566],[4.518623150695116,5.0747775604215315,4.806626742038395]]},
        "Hawaii":{"name":"Hawaii","data":[[62.86255647864743,66.3731710475204,63.624161073825505],[8.322401982218336,5.127541110967241,4.368517388651616],[19.180877423116165,21.041046225560013,25.67419158023185],[9.634164116018074,7.458241615952351,6.333129957291031]]},
        "Idaho":{"name":"Idaho","data":[[51.79094873811396,61.03464097270016,58.961567828964114],[30.235218417101596,21.254874971323698,21.654364978365997],[10.652748981196826,10.914200504702913,12.486637821328582],[7.321083863587617,6.796283551273227,6.897429371341309]]},
        "Illinois":{"name":"Illinois","data":[[65.17030184892559,71.15858901792548,72.44917433860752],[26.953021372795533,21.835637408222855,19.482337117046704],[4.290706928568957,4.223874814555831,4.871265892959385],[3.5859698497099157,2.781898759295832,3.197222651386402]]},
        "Indiana":{"name":"Indiana","data":[[53.76532726152927,60.27244378795339,62.125853248954336],[32.97064257852597,26.299031675693417,23.70438325066472],[5.606464978257218,6.32365009026752,6.880412980268375],[7.657565181687538,7.104874446085672,7.289350520112574]]},
        "Iowa":{"name":"Iowa","data":[[67.74119183924387,73.76802381987889,73.96785679915311],[20.07530641257156,14.231708541032418,12.959933275591057],[5.367502977677028,5.188852831956107,6.441471786481891],[6.815998770507551,6.811414807132582,6.630738138773939]]},
        "Kansas":{"name":"Kansas","data":[[58.99711368629647,63.97215459525258,64.40901056748524],[25.188471976909486,20.891661594643942,20.232409461847993],[9.305130745702838,9.31223371880706,10.770561468165921],[6.509283591091199,5.8239500912964095,4.588018502500846]]},
        "Kentucky":{"name":"Kentucky","data":[[55.3806027820711,60.18002812939521,60.733582131120144],[26.5037351880474,21.28551336146273,18.941124046120425],[7.988794435857806,8.41068917018284,9.360552553890715],[10.126867594023699,10.123769338959212,10.964741268868712]]},
        "Louisiana":{"name":"Louisiana","data":[[49.140641067074064,55.42478065482559,57.71733166104883],[26.92657989834592,22.30365931949497,19.95505735413237],[7.991303581396715,8.21741921677723,9.505892189908808],[15.941475453183301,14.054140808902204,12.821718794909984]]},
        "Maine":{"name":"Maine","data":[[55.0201756468075,60.40758389942208,62.07188558524652],[22.70353667220508,12.68376761634391,11.874294316898757],[7.737953952053169,7.786677481496502,9.013925479864508],[14.538333728934253,19.121971002737503,17.039894617990214]]},
        "Maryland":{"name":"Maryland","data":[[47.67316484085224,56.16556481747629,58.243565344321055],[34.74294833088933,26.88320398581968,24.363925278542524],[13.115673251099802,12.5361693973364,13.273960200291937],[4.46821357715863,4.415061799367635,4.1185491768444775]]},
        "Massachusetts":{"name":"Massachusetts","data":[[76.53404743687835,81.14886327728716,81.50767178118747],[18.20964039785769,13.748773470372033,12.646764509673114],[3.3301453710788063,3.3993580468659053,4.0126751167444965],[1.9261667941851568,1.7030052054748956,1.8328885923949298]]},
        "Michigan":{"name":"Michigan","data":[[54.42305994526353,62.0519293184277,63.752980933328814],[34.45013389835496,27.4468085106383,23.673414030447905],[3.9860510285159356,4.33826181031374,5.451010974355497],[7.140755127865573,6.163000360620266,7.122594061867788]]},
        "Minnesota":{"name":"Minnesota","data":[[58.37228429858171,66.48011930095005,68.67148964156527],[30.889285642640772,22.59010405321627,18.84084182834594],[5.207727336556401,5.417134431393576,6.356461690233475],[5.530702722221108,5.512642214440107,6.13120683985531]]},
        "Mississippi":{"name":"Mississippi","data":[[51.68338337698843,55.093903496099394,55.1929122606459],[24.99201431035584,21.005489742848887,20.228636753358103],[8.317894333354628,9.494365790234037,11.094598456701915],[15.006707979301092,14.406240970817683,13.483852529294085]]},
        "Missouri":{"name":"Missouri","data":[[54.149174515476474,59.642903785518385,60.862134105751764],[29.177995780131816,23.08811731562156,20.806721479589083],[8.01557435886281,8.238959682083621,9.439936671284386],[8.657255345528897,9.030019216776433,8.891207743374773]]},
        "Montana":{"name":"Montana","data":[[52.05587770163416,60.053180609531594,60.25913749758267],[21.758039008961518,15.790550214767846,14.716689228389093],[12.730627306273062,12.620167723460831,13.691742409591956],[13.455455983131259,11.536101452239722,11.33243086443628]]},
        "Nebraska":{"name":"Nebraska","data":[[55.94560404807084,63.55291878882857,65.81531362343725],[30.056925996204935,22.768231935971343,19.450555346890592],[10.139152435167615,10.4382380925729,11.391318345227235],[3.85831752055661,3.24061118262719,3.3428126844449215]]},
        "Nevada":{"name":"Nevada","data":[[35.55108079230706,45.33751002788708,46.501301996394474],[48.09320292594723,37.876762043014864,35.7080857314549],[13.696885016848853,14.218588837529127,15.617279829071244],[2.658831264896852,2.5671390915689347,2.1733324430793886]]},
        "New Hampshire":{"name":"New Hampshire","data":[[55.456066122208014,63.25213049840751,64.96014462979703],[29.725474761389354,21.8817250581045,19.631851425753965],[7.881531043983076,7.71283463889128,8.940751088832279],[6.936928072419561,7.153309804596712,6.4672528556167315]]},
        "New Jersey":{"name":"New Jersey","data":[[67.43920162774924,72.84517827231394,74.26388642126855],[27.212479410909797,21.788306612427217,20.254227706620583],[3.187675612828214,3.2862726330063015,3.713275079547106],[2.160643348512741,2.0802424822525327,1.7686107925637586]]},
        "New Mexico":{"name":"New Mexico","data":[[45.595736581652076,51.694203304396524,53.80855965928926],[36.93186143890369,30.04760571268552,27.096278712560217],[15.074229158736202,15.884906188742647,16.99364658241988],[2.398172820708032,2.373284794175301,2.101515045730643]]},
        "New York":{"name":"New York","data":[[66.9632507620315,73.2307107563664,75.14887250607794],[27.061778216631605,20.9036488027366,18.470033563983186],[3.7661529214785556,3.768529076396807,4.239298404480447],[2.208818099858327,2.0971113645001904,2.141795525458429]]},
        "North Carolina":{"name":"North Carolina","data":[[56.29206805522923,63.39556316684881,65.97418230117881],[21.29559244260777,16.354766384623183,13.612402457247219],[13.716086409685847,12.71787013981996,13.797111074215508],[8.69625309247716,7.531800308708046,6.61630416735846]]},
        "North Dakota":{"name":"North Dakota","data":[[58.706051183927286,65.71268237934905,67.5082690187431],[26.919397273379573,19.438832772166105,17.100330760749724],[10.236785458024396,10.763187429854097,11.278941565600881],[4.13776608466874,4.085297418630752,4.112458654906284]]},
        "Ohio":{"name":"Ohio","data":[[57.66882678209523,63.57875019511942,64.37594946829776],[32.04393624740411,25.862948124252043,23.625769569041335],[6.041234018064904,6.35412872678079,7.3678739905652835],[4.246002952435759,4.204172953847754,4.630406972095626]]},
        "Oklahoma":{"name":"Oklahoma","data":[[46.25561428702374,52.81724226290465,53.404020930873045],[35.06676036542516,28.693448737294652,27.039383090057832],[11.479116379968834,11.99783617572531,13.277334067749932],[7.198508967582266,6.491472824075392,6.279261911319196]]},
        "Oregon":{"name":"Oregon","data":[[56.64461247637051,65.01424948361964,67.12892843619841],[26.35790800252048,19.164901822365152,16.42370314274896],[8.982356647763075,9.781159306612283,10.703805376751232],[8.015122873345936,6.039689387402934,5.743563044301401]]},
        "Pennsylvania":{"name":"Pennsylvania","data":[[59.495232884366885,66.24403849429399,66.93161445433536],[30.393126971746547,23.743825583375916,21.348850223323005],[5.097728780805812,5.304675523760858,6.321440044768231],[5.013911363080756,4.707460398569239,5.398095277573396]]},
        "Rhode Island":{"name":"Rhode Island","data":[[55.23319294961785,62.292590246991765,66.27906976744185],[37.06130088909686,29.803673210892974,25.25839793281654],[5.630946810170021,5.826472450918303,6.782945736434108],[2.0745593511152705,2.07726409119696,1.6795865633074936]]},
        "South Carolina":{"name":"South Carolina","data":[[53.12832837206762,58.3517095444927,60.245137223554494],[25.619247890324164,19.890856442811003,17.713009079915555],[12.587049730999261,13.099454282214055,14.251163172026482],[8.665374006608952,8.657979730482236,7.790690524503474]]},
        "South Dakota":{"name":"South Dakota","data":[[53.33757961783439,56.94985115640028,58.36869401225837],[21.452229299363058,17.678039844286698,13.90853371051391],[10.955414012738855,10.991527364323334,12.989156058462989],[14.254777070063696,14.380581634989694,14.733616218764734]]},
        "Tennessee":{"name":"Tennessee","data":[[50.29061986157317,55.67873860556788,57.41742862474343],[29.582042751711217,23.958282007062497,20.49511724824283],[11.114297732400292,11.373901617804057,12.275300118181253],[9.013039654315323,8.989077769565574,9.812154008832493]]},
        "Texas":{"name":"Texas","data":[[52.24263409316791,59.158849280800496,61.64147879499537],[34.16736512821922,27.462867417135712,24.318218133038037],[10.365627447477982,10.541744840525329,11.727502777664235],[3.224373331134897,2.8365384615384617,2.312800294302351]]},
        "Utah":{"name":"Utah","data":[[46.127551518702994,57.00187685415027,59.54172001707213],[40.821043721717615,30.235514924017682,26.261737089201876],[6.485008301591952,7.386329236544166,8.440034144259496],[6.566396457987434,5.376278985287885,5.756508749466496]]},
        "Vermont":{"name":"Vermont","data":[[68.92315734448509,72.17451844975632,72.88930581613509],[11.082070047046525,9.050823857043397,9.615384615384617],[6.50810245687402,6.42840566256672,7.0356472795497185],[13.486670151594355,12.346252030633558,10.45966228893058]]},
        "Virginia":{"name":"Virginia","data":[[48.614145455502616,54.77020345302748,56.426094495015164],[27.36700797557316,20.652161326555426,17.810528343688294],[20.31928614671896,20.464572308618674,21.43717189230843],[3.699560422205259,4.113062911798423,4.326205268988104]]},
        "Washington":{"name":"Washington","data":[[57.11531974362681,64.22337169359905,65.55253916465344],[25.259826835654508,19.04112701658714,16.819008243879356],[12.606621367644932,12.78452758063007,13.929914572488855],[5.018232053073747,3.9509737091837414,3.6985380189783568]]},
        "West Virginia":{"name":"West Virginia","data":[[58.78305932809149,62.24822864421623,62.14105396023982],[20.344889206576124,15.476474802961548,13.931839697065321],[7.835954253037884,8.645808454740864,9.49826443673083],[13.036097212294495,13.629488098081364,14.428841905964026]]},
        "Wisconsin":{"name":"Wisconsin","data":[[71.83245312272881,76.30979498861048,76.23410767540418],[17.3772954115994,12.921005532053368,12.011458169832052],[4.900915742041765,5.318499837292548,5.9350965311568045],[5.889335723630021,5.450699642043606,5.819337623606969]]},
        "Wyoming":{"name":"Wyoming","data":[[46.05693717277487,51.49442379182156,50.463613374543414],[25.163612565445025,19.271375464684017,19.499859511098624],[13.334424083769633,13.382899628252787,15.425681371171676],[15.44502617801047,15.851301115241636,14.610845743186287]]},
        "Puerto Rico":{"name":"Puerto Rico","data":[[31.253008182255737,36.19723571161748,33.91220967398253],[44.962297449061445,35.56219648860665,36.06435116130407],[4.155302422589443,5.491221516623086,6.349882804176434],[19.629391946093374,22.749346283152782,23.67355636053697]]}
      };

      //conventional_checkbox
      //fha_checkbox
      //va_checkbox
      //rhs_checkbox

      var $conventional_checkbox = $("#conventional_checkbox");
      $conventional_checkbox.click(function() {
          var series = originationsByTypeChart.series[0];
          if (series.visible) {
              series.hide();
              $conventional_checkbox.removeAttr("checked");

          } else {
              series.show();
              $conventional_checkbox.attr("checked");
          }
      });

      var $fha_checkbox = $("#fha_checkbox");
      $fha_checkbox.click(function() {
          var series = originationsByTypeChart.series[1];
          if (series.visible) {
              series.hide();
              $fha_checkbox.removeAttr("checked");

          } else {
              series.show();
              $fha_checkbox.attr("checked");
          }
      });

      var $va_checkbox = $("#va_checkbox");
      $va_checkbox.click(function() {
          var series = originationsByTypeChart.series[2];
          if (series.visible) {
              series.hide();
              $va_checkbox.removeAttr("checked");

          } else {
              series.show();
              $va_checkbox.attr("checked");
          }
      });

      var $rhs_checkbox = $("#rhs_checkbox");
      $rhs_checkbox.click(function() {
          var series = originationsByTypeChart.series[3];
          if (series.visible) {
              series.hide();
              $rhs_checkbox.removeAttr("checked");

          } else {
              series.show();
              $rhs_checkbox.attr("checked");
          }
      });


      var $msa = $('#hmda_chart_2_msa');
      $msa.change(function() {
          var msaID = $msa.val();
          var msaName = chart2DataObj[msaID].name.replace("&apos;", "’").toUpperCase();
          //console.log(msaName);
          // Update the chart name from the chart data object:
          originationsByTypeChart.setTitle({
              text: msaName
          });
          for (var i = 0; i < 4; i++) {
              originationsByTypeChart.series[i].setData(chart2DataObj[msaID].data[i]);
          }
      });

  });
