  $(document).ready(function() {

      if ($('#hmda_chart_2').length !== 0) {
          var originationsByTypeChart = new Highcharts.Chart(chart2_options);
      }

      if ($('#hmda_chart_2_msa').length !== 0) {
          $('#hmda_chart_2_msa').chosen({
              width: '100%'
          });
      }

      var chart2DataObj = {
        "U.S. Total":{"name":"U.S. Total","data":[[62.430214077318546,63.72718822872299,62.217071916529],[23.64733578575852,21.249374934461745,24.369001154313153],[9.090600446212047,10.260276933458787,9.74791440234572],[4.83184969071088,4.763159903356486,3.6660125268121275]]},
        "Alabama":{"name":"Alabama","data":[[55.20679369003789,57.30447745301602,55.05273050015662],[22.998575689984143,20.41207474844274,25.296021718701056],[12.394184515331489,13.057019645424054,12.584316591834604],[9.400446104646477,9.22642815311718,7.0669311893077165]]},
        "Alaska":{"name":"Alaska","data":[[47.210796915167094,48.1789293571254,44.65204156607536],[22.017994858611825,19.652896602297727,24.288863230817675],[26.195372750642676,27.646052309948665,26.34617403169938],[4.5758354755784065,4.522121730628208,4.7129211714075785]]},
        "Arizona":{"name":"Arizona","data":[[51.13538582700132,50.65121637189131,50.7465846537853],[32.54189333061093,31.77881683268957,34.59026988478082],[12.834162206309157,13.962187436470828,12.914800205032204],[3.48855863607858,3.607779358948296,1.7483452564016848]]},
        "Arkansas":{"name":"Arkansas","data":[[55.54785586173162,55.905643775924915,54.41154275710103],[20.764715473667046,19.051409896509824,24.507229315705274],[9.44073047448231,10.931411572464071,10.558724984152859],[14.246698190119028,14.111534755101186,10.52250294304084]]},
        "California":{"name":"California","data":[[66.10909889976662,67.14789934247788,64.63386632501955],[25.55125329615373,23.00877321300641,26.119032961182008],[6.970796835692419,8.563541092319406,8.383554350177201],[1.3688509683872336,1.2797863521963038,0.8635463636212376]]},
        "Colorado":{"name":"Colorado","data":[[63.54620664457029,64.28919182083739,62.9650240112121],[22.201633739593394,20.09858812074002,22.421113378264184],[12.331341180155023,13.62950340798442,13.052618561800532],[1.9208184356812903,1.9827166504381692,1.5612440487231805]]},
        "Connecticut":{"name":"Connecticut","data":[[69.95158074622616,73.03391587677726,71.76977405269173],[23.22344061520934,19.26466232227488,21.888462327462417],[4.176160637994873,4.965195497630331,4.542390762828591],[2.6488180005696385,2.736226303317536,1.7993728570172611]]},
        "Delaware":{"name":"Delaware","data":[[54.95961635537607,57.46321784527765,53.600792471520556],[25.959111559818272,22.271001423825343,28.935116394254585],[9.729934376577486,12.33981964878975,11.33234274393264],[9.351337708228167,7.925961082107262,6.131748390292223]]},
        "District of Columbia":{"name":"District of Columbia","data":[[82.81592975854501,86.01091239769627,85.37682789651294],[12.402006898714331,9.154289178538951,9.800337457817774],[4.7820633427406705,4.834798423764777,4.822834645669291],[0,0,0]]},
        "Florida":{"name":"Florida","data":[[57.849896972578854,59.8047488390547,57.38990146798043],[27.383499762244412,24.34268981665167,28.224957000573326],[11.992788080519892,13.290378823016614,12.82294013857593],[2.7738151846568395,2.5621825212770117,1.5622013928703171]]},
        "Georgia":{"name":"Georgia","data":[[55.0160913737616,56.114624727150606,53.78788530157775],[27.956080015144824,25.42116751553143,30.05975667426164],[11.953051050672052,13.657581015279566,12.53170542968918],[5.0747775604215315,4.806626742038395,3.620652594471433]]},
        "Hawaii":{"name":"Hawaii","data":[[66.3731710475204,63.624161073825505,65.2840574012188],[5.127541110967241,4.368517388651616,5.700805976017299],[21.041046225560013,25.67419158023185,24.66090033418518],[7.458241615952351,6.333129957291031,4.35423628857873]]},
        "Idaho":{"name":"Idaho","data":[[61.03464097270016,58.961567828964114,56.45984421165726],[21.254874971323698,21.654364978365997,26.948313572004146],[10.914200504702913,12.486637821328582,11.553662560914777],[6.796283551273227,6.897429371341309,5.038179655423813]]},
        "Illinois":{"name":"Illinois","data":[[71.15858901792548,72.44917433860752,71.18002410475958],[21.835637408222855,19.482337117046704,21.098319321517565],[4.223874814555831,4.871265892959385,4.802466671103126],[2.781898759295832,3.197222651386402,2.9191899026197285]]},
        "Indiana":{"name":"Indiana","data":[[60.27244378795339,62.125853248954336,61.83179643624766],[26.299031675693417,23.70438325066472,25.87071575492847],[6.32365009026752,6.880412980268375,6.317455915320437],[7.104874446085672,7.289350520112574,5.980031893503432]]},
        "Iowa":{"name":"Iowa","data":[[73.76802381987889,73.96785679915311,73.6659997646228],[14.231708541032418,12.959933275591057,14.981758267623867],[5.188852831956107,6.441471786481891,6.09391549958809],[6.811414807132582,6.630738138773939,5.258326468165235]]},
        "Kansas":{"name":"Kansas","data":[[63.97215459525258,64.40901056748524,65.68047337278107],[20.891661594643942,20.232409461847993,21.36007228845425],[9.31223371880706,10.770561468165921,9.490774477511877],[5.8239500912964095,4.588018502500846,3.4686798612528054]]},
        "Kentucky":{"name":"Kentucky","data":[[60.18002812939521,60.733582131120144,60.33824663986681],[21.28551336146273,18.941124046120425,22.891541803711373],[8.41068917018284,9.360552553890715,8.309984975839525],[10.123769338959212,10.964741268868712,8.460226580582288]]},
        "Louisiana":{"name":"Louisiana","data":[[55.42478065482559,57.71733166104883,57.39122621801928],[22.30365931949497,19.95505735413237,23.917877760057504],[8.21741921677723,9.505892189908808,9.205058514342191],[14.054140808902204,12.821718794909984,9.485837507581033]]},
        "Maine":{"name":"Maine","data":[[60.40758389942208,62.07188558524652,64.7038591181124],[12.68376761634391,11.874294316898757,15.230102497076425],[7.786677481496502,9.013925479864508,8.165371121964641],[19.121971002737503,17.039894617990214,11.90066726284653]]},
        "Maryland":{"name":"Maryland","data":[[56.16556481747629,58.243565344321055,54.108034498411264],[26.88320398581968,24.363925278542524,30.333244635058776],[12.5361693973364,13.273960200291937,12.035312348365082],[4.415061799367635,4.1185491768444775,3.5234085181648847]]},
        "Massachusetts":{"name":"Massachusetts","data":[[81.14886327728716,81.50767178118747,78.30904135561086],[13.748773470372033,12.646764509673114,16.386716435596636],[3.3993580468659053,4.0126751167444965,4.079274795591894],[1.7030052054748956,1.8328885923949298,1.224967413200616]]},
        "Michigan":{"name":"Michigan","data":[[62.0519293184277,63.752980933328814,63.79154690839414],[27.4468085106383,23.673414030447905,25.314135161028815],[4.33826181031374,5.451010974355497,5.384516176578967],[6.163000360620266,7.122594061867788,5.509801753998084]]},
        "Minnesota":{"name":"Minnesota","data":[[66.48011930095005,68.67148964156527,67.27675183405009],[22.59010405321627,18.84084182834594,22.27548697192006],[5.417134431393576,6.356461690233475,5.887933215279535],[5.512642214440107,6.13120683985531,4.559827978750317]]},
        "Mississippi":{"name":"Mississippi","data":[[55.093903496099394,55.1929122606459,54.06392694063927],[21.005489742848887,20.228636753358103,25.06434205064342],[9.494365790234037,11.094598456701915,9.946035699460356],[14.406240970817683,13.483852529294085,10.925695309256952]]},
        "Missouri":{"name":"Missouri","data":[[59.642903785518385,60.862134105751764,60.66097196881738],[23.08811731562156,20.806721479589083,23.95090396417316],[8.238959682083621,9.439936671284386,8.652623431193675],[9.030019216776433,8.891207743374773,6.735500635815779]]},
        "Montana":{"name":"Montana","data":[[60.053180609531594,60.25913749758267,58.28709631526533],[15.790550214767846,14.716689228389093,19.270166453265045],[12.620167723460831,13.691742409591956,13.743064447289798],[11.536101452239722,11.33243086443628,8.699672784179826]]},
        "Nebraska":{"name":"Nebraska","data":[[63.55291878882857,65.81531362343725,64.72498163967376],[22.768231935971343,19.450555346890592,21.699972942677128],[10.4382380925729,11.391318345227235,10.428665300916084],[3.24061118262719,3.3428126844449215,3.146380116733022]]},
        "Nevada":{"name":"Nevada","data":[[45.33751002788708,46.501301996394474,45.2836774695916],[37.876762043014864,35.7080857314549,37.88899927503155],[14.218588837529127,15.617279829071244,15.173321161023548],[2.5671390915689347,2.1733324430793886,1.6540020943533014]]},
        "New Hampshire":{"name":"New Hampshire","data":[[63.25213049840751,64.96014462979703,63.47620299763344],[21.8817250581045,19.631851425753965,23.45516697344202],[7.71283463889128,8.940751088832279,8.250065737575598],[7.153309804596712,6.4672528556167315,4.818564291348935]]},
        "New Jersey":{"name":"New Jersey","data":[[72.84517827231394,74.26388642126855,70.41633585447049],[21.788306612427217,20.254227706620583,24.69878678979845],[3.2862726330063015,3.713275079547106,3.7830986307857315],[2.0802424822525327,1.7686107925637586,1.1017787249453288]]},
        "New Mexico":{"name":"New Mexico","data":[[51.694203304396524,53.80855965928926,52.51635073716883],[30.04760571268552,27.096278712560217,29.89136459372575],[15.884906188742647,16.99364658241988,15.835273251302517],[2.373284794175301,2.101515045730643,1.7570114178029044]]},
        "New York":{"name":"New York","data":[[73.2307107563664,75.14887250607794,74.60668452044585],[20.9036488027366,18.470033563983186,19.770194016527032],[3.768529076396807,4.239298404480447,4.031022988788155],[2.0971113645001904,2.141795525458429,1.5920984742389621]]},
        "North Carolina":{"name":"North Carolina","data":[[63.39556316684881,65.97418230117881,64.7979806741495],[16.354766384623183,13.612402457247219,16.92573252606561],[12.71787013981996,13.797111074215508,12.97295421820516],[7.531800308708046,6.61630416735846,5.303332581579723]]},
        "North Dakota":{"name":"North Dakota","data":[[65.71268237934905,67.5082690187431,64.47511805303306],[19.438832772166105,17.100330760749724,21.367598982927717],[10.763187429854097,11.278941565600881,10.379585906284055],[4.085297418630752,4.112458654906284,3.7776970577551765]]},
        "Ohio":{"name":"Ohio","data":[[63.57875019511942,64.37594946829776,63.89810186699055],[25.862948124252043,23.625769569041335,25.23240061662073],[6.35412872678079,7.3678739905652835,7.066224443717788],[4.204172953847754,4.630406972095626,3.803273072670933]]},
        "Oklahoma":{"name":"Oklahoma","data":[[52.81724226290465,53.404020930873045,53.15432054327742],[28.693448737294652,27.039383090057832,29.760276437981425],[11.99783617572531,13.277334067749932,12.37731864756557],[6.491472824075392,6.279261911319196,4.708084371175581]]},
        "Oregon":{"name":"Oregon","data":[[65.01424948361964,67.12892843619841,64.3028369731403],[19.164901822365152,16.42370314274896,21.21217841031352],[9.781159306612283,10.703805376751232,10.373921742577249],[6.039689387402934,5.743563044301401,4.111062873968931]]},
        "Pennsylvania":{"name":"Pennsylvania","data":[[66.24403849429399,66.93161445433536,66.05069473964976],[23.743825583375916,21.348850223323005,24.01290290315321],[5.304675523760858,6.321440044768231,5.955506655664191],[4.707460398569239,5.398095277573396,3.9808957015328446]]},
        "Rhode Island":{"name":"Rhode Island","data":[[62.292590246991765,66.27906976744185,58.93997445721584],[29.803673210892974,25.25839793281654,32.982120051085566],[5.826472450918303,6.782945736434108,6.790123456790123],[2.07726409119696,1.6795865633074936,1.2877820349084717]]},
        "South Carolina":{"name":"South Carolina","data":[[58.3517095444927,60.245137223554494,59.993220234518255],[19.890856442811003,17.713009079915555,21.01419128183793],[13.099454282214055,14.251163172026482,13.052589408157292],[8.657979730482236,7.790690524503474,5.939999075486526]]},
        "South Dakota":{"name":"South Dakota","data":[[56.94985115640028,58.36869401225837,57.56041426927503],[17.678039844286698,13.90853371051391,19.332566168009205],[10.991527364323334,12.989156058462989,10.962792481779823],[14.380581634989694,14.733616218764734,12.144227080935941]]},
        "Tennessee":{"name":"Tennessee","data":[[55.67873860556788,57.41742862474343,55.74751864755816],[23.958282007062497,20.49511724824283,24.43877734276786],[11.373901617804057,12.275300118181253,11.311854219795745],[8.989077769565574,9.812154008832493,8.501849789878237]]},
        "Texas":{"name":"Texas","data":[[59.158849280800496,61.64147879499537,60.158297850576034],[27.462867417135712,24.318218133038037,26.809300957714782],[10.541744840525329,11.727502777664235,11.592632373061235],[2.8365384615384617,2.312800294302351,1.4397688186479471]]},
        "Utah":{"name":"Utah","data":[[57.00187685415027,59.54172001707213,55.72639838015693],[30.235514924017682,26.261737089201876,32.02142917404876],[7.386329236544166,8.440034144259496,7.761748080654686],[5.376278985287885,5.756508749466496,4.490424365139627]]},
        "Vermont":{"name":"Vermont","data":[[72.17451844975632,72.88930581613509,74.86232012790904],[9.050823857043397,9.615384615384617,10.214958251909753],[6.42840566256672,7.0356472795497185,6.448747557292592],[12.346252030633558,10.45966228893058,8.473974062888614]]},
        "Virginia":{"name":"Virginia","data":[[54.77020345302748,56.426094495015164,54.304418313529936],[20.652161326555426,17.810528343688294,22.19725420181001],[20.464572308618674,21.43717189230843,19.975784440476925],[4.113062911798423,4.326205268988104,3.522543044183135]]},
        "Washington":{"name":"Washington","data":[[64.22337169359905,65.55253916465344,63.57453026280587],[19.04112701658714,16.819008243879356,20.47601407668087],[12.78452758063007,13.929914572488855,13.40371673766747],[3.9509737091837414,3.6985380189783568,2.5457389228457945]]},
        "West Virginia":{"name":"West Virginia","data":[[62.24822864421623,62.14105396023982,64.96421205871648],[15.476474802961548,13.931839697065321,15.461603785029723],[8.645808454740864,9.49826443673083,8.849933276719641],[13.629488098081364,14.428841905964026,10.72425087953415]]},
        "Wisconsin":{"name":"Wisconsin","data":[[76.30979498861048,76.23410767540418,77.10063076474471],[12.921005532053368,12.011458169832052,13.176997805368407],[5.318499837292548,5.9350965311568045,5.815006369035744],[5.450699642043606,5.819337623606969,3.9073650608511485]]},
        "Wyoming":{"name":"Wyoming","data":[[51.49442379182156,50.463613374543414,49.42514371407148],[19.271375464684017,19.499859511098624,23.706573356660833],[13.382899628252787,15.425681371171676,14.846288427893025],[15.851301115241636,14.610845743186287,12.021994501374657]]},
        "Puerto Rico":{"name":"Puerto Rico","data":[[36.19723571161748,33.91220967398253,27.081832218219247],[35.56219648860665,36.06435116130407,51.724137931034484],[5.491221516623086,6.349882804176434,6.670097786927432],[22.749346283152782,23.67355636053697,14.523932063818837]]}
      };

      //conventional_checkbox
      //fha_checkbox
      //va_checkbox
      //rhs_checkbox

      var $conventional_checkbox = $("#conventional_checkbox");
      $conventional_checkbox.click(function() {
          var series = originationsByTypeChart.series[0];
          if (series.visible) {
              series.hide();
              $conventional_checkbox.removeAttr("checked");

          } else {
              series.show();
              $conventional_checkbox.attr("checked");
          }
      });

      var $fha_checkbox = $("#fha_checkbox");
      $fha_checkbox.click(function() {
          var series = originationsByTypeChart.series[1];
          if (series.visible) {
              series.hide();
              $fha_checkbox.removeAttr("checked");

          } else {
              series.show();
              $fha_checkbox.attr("checked");
          }
      });

      var $va_checkbox = $("#va_checkbox");
      $va_checkbox.click(function() {
          var series = originationsByTypeChart.series[2];
          if (series.visible) {
              series.hide();
              $va_checkbox.removeAttr("checked");

          } else {
              series.show();
              $va_checkbox.attr("checked");
          }
      });

      var $rhs_checkbox = $("#rhs_checkbox");
      $rhs_checkbox.click(function() {
          var series = originationsByTypeChart.series[3];
          if (series.visible) {
              series.hide();
              $rhs_checkbox.removeAttr("checked");

          } else {
              series.show();
              $rhs_checkbox.attr("checked");
          }
      });


      var $msa = $('#hmda_chart_2_msa');
      $msa.change(function() {
          var msaID = $msa.val();
          var msaName = chart2DataObj[msaID].name.replace("&apos;", "’").toUpperCase();
          //console.log(msaName);
          // Update the chart name from the chart data object:
          originationsByTypeChart.setTitle({
              text: msaName
          });
          for (var i = 0; i < 4; i++) {
              originationsByTypeChart.series[i].setData(chart2DataObj[msaID].data[i]);
          }
      });

  });
