  $(document).ready(function() {

      if ($('#hmda_chart_2').length !== 0) {
          var originationsByTypeChart = new Highcharts.Chart(chart2_options);
      }

      if ($('#hmda_chart_2_msa').length !== 0) {
          $('#hmda_chart_2_msa').chosen({
              width: '100%'
          });
      }

      var chart2DataObj = {
        "U.S. Total":{"name":"U.S. Total","data":[[63.736019620134456,60.95191810341459,61.57145218888256],[21.244614839331266,25.291430768100838,24.924406010956403],[10.257496436041656,10.150157283073591,10.282447016498928],[4.76186910449262,3.6064938454109754,3.221694783662106]]},
        "Alabama":{"name":"Alabama","data":[[57.31470392548237,53.5846609855502,52.316539769965985],[20.407185628742518,26.26667284179326,27.486635347480963],[13.053892215568863,12.956187476843276,13.354527782277662],[9.224218230206255,7.192478695813264,6.842297100275394]]},
        "Alaska":{"name":"Alaska","data":[[48.1789293571254,43.17463898916967,45.53268491291563],[19.652896602297727,24.582581227436823,22.415743044560056],[27.646052309948665,27.425541516245488,27.301515494232078],[4.522121730628208,4.8172382671480145,4.750056548292242]]},
        "Arizona":{"name":"Arizona","data":[[50.66724471962174,50.15122509317052,55.92146622177088],[31.768977523675336,35.00945864814962,29.88345664683979],[13.95726924171194,13.076722663374074,12.789786740171188],[3.6065085149909906,1.762593595305792,1.405290391218144]]},
        "Arkansas":{"name":"Arkansas","data":[[55.90749120160885,53.292264561584716,54.013350432409325],[19.050611697670522,25.257294625401162,24.69829995725231],[10.930953578012401,11.055369065623962,10.703363914373089],[14.110943522708228,10.395071747390165,10.584985695965274]]},
        "California":{"name":"California","data":[[67.16120203213167,64.24549378784661,65.75158142196514],[22.999456348536828,26.408138645423694,25.165101999783474],[8.560073486680539,8.47393658784797,8.44548927416985],[1.279268132650957,0.8724309788817114,0.637827304081538]]},
        "Colorado":{"name":"Colorado","data":[[64.30613511113273,62.7475435438041,64.41419090739937],[20.089052178250345,22.63735548662777,21.266720420103784],[13.623036776603122,13.044704249181184,13.091029378320826],[1.9817759340137957,1.5703967203869598,1.2280592941760218]]},
        "Connecticut":{"name":"Connecticut","data":[[73.04547304547305,68.59083771420768,68.36704164672092],[19.258519258519257,24.29166382194306,24.560196266156055],[4.961704961704962,5.12732982863385,5.618717089516515],[2.734302734302734,1.9901686352154022,1.4540449976065102]]},
        "Delaware":{"name":"Delaware","data":[[57.47330960854092,52.60109733793944,52.958231403461085],[22.265717674970347,29.54684007315586,30.18030261846516],[12.336892052194544,11.562690510058932,11.099030533659509],[7.924080664294188,6.289372078845763,5.762435444414242]]},
        "District of Columbia":{"name":"District of Columbia","data":[[86.01303227761782,84.84007594566964,87.92543426069764],[9.152901954841642,10.165035782094348,7.6825307160005645],[4.834065767540537,4.9948882722360155,4.392035023301793],[0,0,0]]},
        "Florida":{"name":"Florida","data":[[59.81273952246343,56.71279770077068,56.38062938717564],[24.339392855945743,28.708331045087593,29.04645476772616],[13.286443726885732,13.005931132956231,13.108683650130137],[2.561423894705087,1.5729401211854943,1.4642321949680575]]},
        "Georgia":{"name":"Georgia","data":[[56.122700210394385,53.02859018306469,52.853179007452034],[25.417431398003494,30.733535117788634,30.715871254162042],[13.654371278929228,12.859200641820436,13.11717139686063],[4.805497112672904,3.378674057326234,3.313778341525289]]},
        "Hawaii":{"name":"Hawaii","data":[[63.624161073825505,63.80407810982847,63.151028600100354],[4.368517388651616,6.171107994389901,6.783743100852986],[25.67419158023185,25.385694249649372,26.512794781736076],[6.333129957291031,4.6391196461322695,3.5524335173105865]]},
        "Idaho":{"name":"Idaho","data":[[58.96574540642337,55.596486256729946,58.50234009360374],[21.65216063521148,27.531069100918913,25.606296979151892],[12.48536672265486,11.901388495324454,12.147213161253722],[6.896727235710287,4.971056147026677,3.74414976599064]]},
        "Illinois":{"name":"Illinois","data":[[72.46018696003706,70.0311002636584,69.54290177409158],[19.47454963343841,22.49667365946436,23.01855915498196],[4.869318749602551,5.079709730872522,5.390709264700413],[3.1959446569219727,2.392516346004718,2.047829806226057]]},
        "Indiana":{"name":"Indiana","data":[[62.13586196175967,58.80016527383475,58.51019109045268],[23.698119073527128,27.983259359963746,28.221573643690174],[6.878594745841754,6.946832473642822,7.131961709845182],[7.287424218871444,6.2697428925586784,6.136273556011963]]},
        "Iowa":{"name":"Iowa","data":[[73.96952686447474,72.14075408055342,73.75500105285323],[12.959101844426623,15.833404796615499,14.887344704148243],[6.441058540497194,6.731841180001714,6.596125500105285],[6.630312750601443,5.293999942829374,4.761528742893241]]},
        "Kansas":{"name":"Kansas","data":[[64.41570160926456,63.10430876726002,64.45028166339641],[20.228605805384266,23.217434703044418,21.71656433951516],[10.768536622048428,10.154716353352187,10.427875181973542],[4.587155963302752,3.5235401763433707,3.405278815114881]]},
        "Kentucky":{"name":"Kentucky","data":[[60.7488864142539,58.56646331089128,58.08600064662141],[18.933741648106906,24.07943027975597,25.013471279232675],[9.356904231625835,8.827747125878036,9.169091496928548],[10.960467706013363,8.52635928347471,7.731436577217372]]},
        "Louisiana":{"name":"Louisiana","data":[[57.72285505277458,55.22120080436657,54.07379482588003],[19.95245062179956,25.301637460499855,26.348899674850383],[9.504650433692131,9.67394426888825,9.74506385184487],[12.820043891733723,9.803217466245332,9.83224164742472]]},
        "Maine":{"name":"Maine","data":[[62.082588655817894,59.149331980382215,59.476846942382465],[11.870943467218511,17.901234567901234,18.791092258748673],[9.011381807920234,9.58904109589041,9.862142099681867],[17.035086069043366,13.360392355826145,11.869918699186991]]},
        "Maryland":{"name":"Maryland","data":[[58.245108364281364,53.04881970798224,53.68330464716007],[24.3630249616614,31.01884607962951,30.91795754446357],[13.273469689411154,12.336785231877533,12.300631095811818],[4.118396984646084,3.595548980510709,3.098106712564544]]},
        "Massachusetts":{"name":"Massachusetts","data":[[81.52275301485776,77.98807363235676,77.5478206334274],[12.639083216736624,16.59930759962787,17.287687294640545],[4.00759544273436,4.16050267656972,4.135138451470407],[1.8305683256712642,1.2521160914456526,1.0293536204616414]]},
        "Michigan":{"name":"Michigan","data":[[63.7554387749336,62.70776372469954,65.16295162332204],[23.67180878114935,26.061684926926176,24.376819545345946],[5.450641351641521,5.62265190109955,5.765027564176305],[7.122111092275526,5.60789944727473,4.6952012671557135]]},
        "Minnesota":{"name":"Minnesota","data":[[68.67612487464861,66.01119304531377,68.69167264895908],[18.838054217560703,23.13460817397825,21.04912316685468],[6.35552121520985,6.200613812162368,6.1980822479745665],[6.1302996925808415,4.653584968545599,4.061121936211671]]},
        "Mississippi":{"name":"Mississippi","data":[[55.1929122606459,50.876379008145165,49.08099551490634],[20.228636753358103,26.71409423651923,27.512971594406828],[11.094598456701915,11.135168574079803,11.960249758156714],[13.483852529294085,11.274358181255801,11.44578313253012]]},
        "Missouri":{"name":"Missouri","data":[[60.87058188686033,58.43087921697375,58.28672039005891],[20.802230416404353,25.574152769893992,25.582718223064944],[9.437899091644931,9.243207584799718,9.53883659511072],[8.889288605090385,6.751760428332541,6.591724791765423]]},
        "Montana":{"name":"Montana","data":[[60.26297979309678,58.425306335274186,61.30678917815212],[14.715266363724258,18.727730946380465,17.54296409732857],[13.690418640626511,14.017554532023984,13.96120469627361],[11.33133520255245,8.82940818632137,7.189042028245704]]},
        "Nebraska":{"name":"Nebraska","data":[[65.8226489995172,62.449073014419774,63.379969892853985],[19.4463816318867,23.176928358892194,21.920658815195253],[11.388873987447026,11.311512932021058,11.737359426193217],[3.3420953811490803,3.0624856946669716,2.9620118657575487]]},
        "Nevada":{"name":"Nevada","data":[[46.501301996394474,45.05007075214978,47.8197774860065],[35.7080857314549,38.0809839991292,36.02146822380393],[15.617279829071244,15.228039621203877,14.894156128348651],[2.1733324430793886,1.6409056275171439,1.2645981618409232]]},
        "New Hampshire":{"name":"New Hampshire","data":[[64.99220224903554,62.23771397018222,62.78998964866346],[19.61749979479603,24.378796245168417,24.313462826523775],[8.930476894032669,8.586416344561016,9.28575777872496],[6.459821062135764,4.797073440088349,3.6107897460878036]]},
        "New Jersey":{"name":"New Jersey","data":[[74.27385892116183,69.83857869466725,69.04867748388531],[20.246379385504625,25.204804171593842,26.034180435158433],[3.711836220675848,3.852455512972118,4.113259736731619],[1.7679254726577005,1.1041616207667868,0.8038823442246426]]},
        "New Mexico":{"name":"New Mexico","data":[[53.8176996091569,50.816351583599314,50.0085329085841],[27.093802345058627,30.94770439479499,31.947209738892994],[16.987716359575657,16.431377363123005,16.696057796234143],[2.1007816862088218,1.8045666584826907,1.3481995562887537]]},
        "New York":{"name":"New York","data":[[75.1491171086045,72.63347763347764,72.79550028040774],[18.469851768735605,21.408730158730158,21.48913007620493],[4.239256678281069,4.351551226551226,4.377659749942269],[2.141774444378826,1.6062409812409812,1.3377098934450566]]},
        "North Carolina":{"name":"North Carolina","data":[[65.98128514222877,64.28888612586368,65.79074591020382],[13.610805651804053,17.18502992948365,16.448076353258582],[13.793389630059963,13.200056839375476,13.28150585593313],[6.614519575907214,5.326027105277181,4.479671880604464]]},
        "North Dakota":{"name":"North Dakota","data":[[67.5082690187431,63.75219683655536,65.7461127871896],[17.100330760749724,21.188488576449913,19.958226966813648],[11.278941565600881,11.083040421792619,10.733348804827106],[4.112458654906284,3.9762741652021085,3.562311441169645]]},
        "Ohio":{"name":"Ohio","data":[[64.37666153630894,61.733947057474914,61.73036093418259],[23.625297327550022,26.697000158721764,26.77578993380792],[7.367726718503268,7.58160943865404,7.802547770700636],[4.63031441763777,3.9874433451492863,3.6913013613088546]]},
        "Oklahoma":{"name":"Oklahoma","data":[[53.40787045961501,51.929260450160776,50.868310598111236],[27.037149230303196,30.260504659654476,30.50367261280168],[13.27623716024564,13.10153141860592,13.751311647429171],[6.278743149836147,4.708703471578833,4.876705141657922]]},
        "Oregon":{"name":"Oregon","data":[[67.1367056262717,64.0493968983343,66.46547996540791],[16.419817347276773,21.35554279149914,19.83820985874892],[10.701272890739602,10.45184759716638,9.957840876333238],[5.742204135711919,4.1432127130001914,3.738469299509945]]},
        "Pennsylvania":{"name":"Pennsylvania","data":[[66.93224202237879,63.479239296847624,62.43635566645311],[21.351015333609617,26.051869477800526,27.18666756583606],[6.319933692498964,6.482762437053843,6.742927470748896],[5.396808951512639,3.9861287882980094,3.6340492969619316]]},
        "Rhode Island":{"name":"Rhode Island","data":[[66.34429400386847,58.29533116178067,58.21949632933742],[25.209542230818826,33.51791530944625,34.36483598178608],[6.769825918762089,6.883821932681868,6.6629495400055765],[1.6763378465506125,1.3029315960912053,0.7527181488709228]]},
        "South Carolina":{"name":"South Carolina","data":[[60.2581702694396,57.934556136216145,57.349921307052384],[17.707202130929208,22.23930047477542,23.38304729071423],[14.246491138203051,13.905113228814429,14.079292512928127],[7.788136461428133,5.921030160194009,5.187738889305254]]},
        "South Dakota":{"name":"South Dakota","data":[[58.36869401225837,56.863774813570004,59.589041095890416],[13.90853371051391,19.567272345341877,18.593875906526993],[12.989156058462989,12.204600357105345,12.439564867042707],[14.733616218764734,11.364352483982774,9.377518130539887]]},
        "Tennessee":{"name":"Tennessee","data":[[57.41875291556523,54.521583022962936,55.0763225425587],[20.494479863162805,25.248519600225073,25.536426394226712],[12.274918364173534,11.786929610674955,12.059805067286725],[9.811848857098429,8.442967766137027,7.3274459959278575]]},
        "Texas":{"name":"Texas","data":[[61.64860436690308,58.71357831999282,59.07730256818736],[24.313700721872785,27.720878194990227,27.47857702634994],[11.725324248312347,12.056189009440804,12.21045261251076],[2.3123706629117886,1.5093544755761514,1.233667792951938]]},
        "Utah":{"name":"Utah","data":[[59.55358809568255,54.933851460507356,57.87814313346228],[26.254033440891757,32.648561323844035,30.597678916827853],[8.437558334888932,7.926909138540802,8.059961315280464],[5.754820128536761,4.490678077107803,3.4642166344294005]]},
        "Vermont":{"name":"Vermont","data":[[72.88930581613509,73.256054647071,71.28917245261775],[9.615384615384617,11.426205754502174,13.285794708200413],[7.0356472795497185,7.017180707927966,8.725839744792644],[10.45966228893058,8.300558890498861,6.699193094389192]]},
        "Virginia":{"name":"Virginia","data":[[56.429242216282596,53.49870496325465,53.243284639390396],[17.80924173469142,22.602076270294173,22.79967835193659],[21.435623299381152,20.404725304807428,20.556757481189333],[4.325892749644827,3.494493461643749,3.400279527483678]]},
        "Washington":{"name":"Washington","data":[[65.56497491628389,63.27944329983601,64.77439887500115],[16.81293647533331,20.70386410461254,19.830880108059098],[13.924885785064298,13.513854433839297,13.58047534901794],[3.69720282331852,2.5028381617121473,1.814245667921805]]},
        "West Virginia":{"name":"West Virginia","data":[[62.144040388104436,60.647244330980634,59.017106407654396],[13.930740711524809,17.157230815437753,18.411133661930997],[9.497515184980672,10.211743505030785,10.321832415192809],[14.427703715390077,11.983781348550833,12.249927515221803]]},
        "Wisconsin":{"name":"Wisconsin","data":[[76.2532102178047,75.58796257270505,76.12991526596645],[12.001803603285694,14.116159487482088,13.977270979746875],[5.930326020898273,6.256427547837815,6.425023451796946],[5.814660158011331,4.039450391975048,3.467790302489735]]},
        "Wyoming":{"name":"Wyoming","data":[[50.463613374543414,47.92358803986711,49.26515615431721],[19.499859511098624,25.152270210409743,23.025107164727494],[15.425681371171676,15.83610188261351,17.238211879975506],[14.610845743186287,11.088039867109636,10.471524800979793]]},
        "Puerto Rico":{"name":"Puerto Rico","data":[[33.91220967398253,27.027305512622355,22.47344620885477],[36.06435116130407,51.7671303451829,50.60469029340625],[6.349882804176434,6.666666666666667,6.9723419917972445],[23.67355636053697,14.538897475528078,19.94952150594174]]}
      };

      //conventional_checkbox
      //fha_checkbox
      //va_checkbox
      //rhs_checkbox

      var $conventional_checkbox = $("#conventional_checkbox");
      $conventional_checkbox.click(function() {
          var series = originationsByTypeChart.series[0];
          if (series.visible) {
              series.hide();
              $conventional_checkbox.removeAttr("checked");

          } else {
              series.show();
              $conventional_checkbox.attr("checked");
          }
      });

      var $fha_checkbox = $("#fha_checkbox");
      $fha_checkbox.click(function() {
          var series = originationsByTypeChart.series[1];
          if (series.visible) {
              series.hide();
              $fha_checkbox.removeAttr("checked");

          } else {
              series.show();
              $fha_checkbox.attr("checked");
          }
      });

      var $va_checkbox = $("#va_checkbox");
      $va_checkbox.click(function() {
          var series = originationsByTypeChart.series[2];
          if (series.visible) {
              series.hide();
              $va_checkbox.removeAttr("checked");

          } else {
              series.show();
              $va_checkbox.attr("checked");
          }
      });

      var $rhs_checkbox = $("#rhs_checkbox");
      $rhs_checkbox.click(function() {
          var series = originationsByTypeChart.series[3];
          if (series.visible) {
              series.hide();
              $rhs_checkbox.removeAttr("checked");

          } else {
              series.show();
              $rhs_checkbox.attr("checked");
          }
      });


      var $msa = $('#hmda_chart_2_msa');
      $msa.change(function() {
          var msaID = $msa.val();
          var msaName = chart2DataObj[msaID].name.replace("&apos;", "’").toUpperCase();
          //console.log(msaName);
          // Update the chart name from the chart data object:
          originationsByTypeChart.setTitle({
              text: msaName
          });
          for (var i = 0; i < 4; i++) {
              originationsByTypeChart.series[i].setData(chart2DataObj[msaID].data[i]);
          }
      });

  });
