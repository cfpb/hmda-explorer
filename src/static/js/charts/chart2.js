  $(document).ready(function() {

      if ($('#hmda_chart_2').length !== 0) {
          var originationsByTypeChart = new Highcharts.Chart(chart2_options);
      }

      if ($('#hmda_chart_2_msa').length !== 0) {
          $('#hmda_chart_2_msa').chosen({
              width: '100%'
          });
      }

      var chart2DataObj = {
        "Alabama": {"name":"Alabama","data":[[55.70676031606673,60.87068581738091,63.35761090435855],[10.530393017610908,10.815623608800582,11.203452133610355],[24.611372204720343,20.110593031701775,17.51866480969885],[9.151474461602024,8.203097542116732,7.920272152332244]]},
        "Alaska": {"name":"Alaska","data":[[47.5456008583691,51.36670216542421,51.84135977337111],[23.56491416309013,24.139155129570465,25.643059490084987],[24.973175965665238,20.281623476511655,18.322946175637394],[3.9163090128755367,4.212519228493669,4.192634560906516]]},
        "Arizona": {"name":"Arizona","data":[[57.55110474050543,59.887262587215915,58.130128013605756],[9.425483283616783,10.535323192551193,11.846429638482222],[29.572954196206048,26.714697751235683,26.964445772333434],[3.4504577796717415,2.8627164689972115,3.0589965755785893]]},
        "Arkansas": {"name":"Arkansas","data":[[57.710459883657116,63.81984489958242,64.33457500846596],[7.331796729228405,7.685424537681447,8.845242126650863],[21.21245381041232,16.905282693709818,15.408059600406364],[13.745289576702154,11.589447869026314,11.412123264476804]]},
        "California": {"name":"California","data":[[64.40359659471352,72.03761892429098,72.27004812118565],[5.694927143449288,5.742689803012384,7.223872663939483],[28.48133150527692,21.091997241611722,19.42627903960111],[1.420144756560278,1.1276940310849142,1.0798001752737465]]},
        "Colorado": {"name":"Colorado","data":[[63.13556504275891,68.94293420950393,69.40980708231501],[10.420407240420806,10.494066978210437,11.650980188237742],[24.381225977204114,18.927949028183242,17.237793146482243],[2.0628017396161673,1.6350497841023877,1.7014195829650045]]},
        "Connecticut": {"name":"Connecticut","data":[[67.69207795116851,72.75098203361453,75.63892693682558],[3.5951616516090494,3.7800244703458046,4.480005345271105],[26.42425147465094,21.07025565071801,17.402198242742124],[2.2885089225714927,2.3987378453216563,2.478869475161193]]},
        "Delaware": {"name":"Delaware","data":[[59.345794392523366,65.56966897613549,66.45149218823089],[8.241291418861513,7.419168591224018,9.729628590139395],[24.63891248937978,19.8518090839107,17.569463934886333],[7.7740016992353445,7.159353348729793,6.249415286743381]]},
        "District of Columbia": {"name":"District of Columbia","data":[[78.18837314105453,85.0218459858001,87.95102253484434],[4.4614691302388465,4.164391043145822,4.155268985280709],[17.350157728706623,10.81376297105407,7.8937084798749515],[0,0,0]]},
        "Florida": {"name":"Florida","data":[[59.373268676506285,66.43388954813236,67.34868516372066],[9.256550238728112,9.53616096275216,10.771334395827296],[27.994372615053255,21.821542209667427,19.794081425673717],[3.375808469712344,2.2084072794480556,2.085899014778325]]},
        "Georgia": {"name":"Georgia","data":[[53.3440439480708,60.104582174102504,60.7199359166917],[10.431188619108083,10.594531782478017,12.219885851607089],[32.28343396128631,24.80586375266763,22.751577050165213],[3.9413334715348136,4.495022290751852,4.308601181535996]]},
        "Hawaii": {"name":"Hawaii","data":[[71.86672550750221,74.93487698986976,72.54415011037527],[14.541041482789055,15.677761698022191,19.361662987490803],[6.299646954986761,3.8301977809937293,3.3204562178072115],[7.292586054721976,5.557163531114327,4.773730684326711]]},
        "Idaho": {"name":"Idaho","data":[[60.977865110096516,67.76624484572729,65.44092465753425],[8.617002831878864,9.019384804967059,10.509417808219178],[24.463965786279836,17.593250864969903,18.24486301369863],[5.941166271744784,5.62111948433575,5.8047945205479445]]},
        "Illinois": {"name":"Illinois","data":[[69.1965059270811,74.37407211695731,75.66666666666667],[3.7957781651020803,3.752631623092859,4.299679487179487],[23.83267590129346,19.401457772409685,17.21073717948718],[3.1750400065233566,2.471838487540156,2.8229166666666665]]},
        "Indiana": {"name":"Indiana","data":[[57.79711823415199,63.562253707547455,65.1578601340632],[5.118029771434411,5.796709081611167,6.325839324252862],[30.095036958817317,24.125379779201637,21.81171123529664],[6.989815035596281,6.5156574316397435,6.704589306387297]]},
        "Iowa": {"name":"Iowa","data":[[73.74141161773892,79.1640127388535,79.43813962914176],[4.366021236727045,4.118895966029724,5.086634917418178],[16.346033728919426,11.305732484076433,10.239132637551931],[5.546533416614616,5.41135881104034,5.236092815888135]]},
        "Kansas": {"name":"Kansas","data":[[64.11463433004444,68.4128094904862,68.97973879742071],[8.141899525495218,8.17088206871272,9.384308205950706],[22.03057919710778,18.30784098103902,17.6426303557985],[5.7128869473525645,5.108467459762071,3.9933226408300873]]},
        "Kentucky": {"name":"Kentucky","data":[[61.22329119588321,65.53057947744854,65.89117291414752],[6.938695603535071,7.281175497494282,8.130592503022974],[23.033896408994295,18.43283218994794,16.4546553808948],[8.804116791587425,8.75541283510923,9.523579201934703]]},
        "Louisiana": {"name":"Louisiana","data":[[55.15562690973121,60.90255497529332,62.88340745495392],[7.0459371277642555,7.210603967120208,8.34441336940076],[23.74540369775752,19.552235310648463,17.523268075741598],[14.053032264747008,12.334605746938012,11.248911099903719]]},
        "Maine": {"name":"Maine","data":[[64.61824953445065,68.84317946264848,70.0208240368883],[6.089385474860335,6.130909670732679,7.1247954782091325],[17.849162011173185,9.973690504663955,9.38569091179533],[11.44320297951583,15.052220361954873,13.468689573107243]]},
        "Maryland": {"name":"Maryland","data":[[52.93011898763614,60.634767807712805,62.356269240369414],[11.790240688345413,11.249419734195278,11.956069556535486],[31.24297507848533,24.13733817031446,21.973541892004324],[4.0366652455331185,3.9784742877774533,3.714119311090773]]},
        "Massachusetts": {"name":"Massachusetts","data":[[80.2164181507842,84.07210194304339,84.16879394190043],[2.8034523847863193,2.871714177332565,3.4312117625247787],[15.35860358764613,11.617516894502437,10.831277363414669],[1.6215258767833565,1.4386669851215983,1.5687169321601233]]},
        "Michigan": {"name":"Michigan","data":[[59.130962431405656,65.60716308657575,67.00096689913391],[3.573501477416632,3.931201254847283,4.9620440659137195],[30.891198818066695,24.876911681408217,21.554650373387645],[6.404337273111017,5.584723977168751,6.4823386615647305]]},
        "Minnesota": {"name":"Minnesota","data":[[64.03180542563143,70.89354773051089,72.68041975061202],[4.497107022832,4.701811520455934,5.538932871397689],[26.693344420191938,19.62141257887238,16.437846272780632],[4.777743131344628,4.783228170160798,5.34280110520966]]},
        "Mississippi": {"name":"Mississippi","data":[[58.68770129373873,61.611772258160094,61.44169819664881],[7.118292483214149,8.11317959606933,9.547442386123532],[21.365795076150444,17.96454496074268,17.404550144956023],[12.828211146896665,12.310503185027901,11.606309272271632]]},
        "Missouri": {"name":"Missouri","data":[[62.23613595706618,66.02488662932103,66.6916499686434],[6.595706618962432,6.93561800750051,8.033406243786041],[24.042933810375672,19.438560153148487,17.711121648286092],[7.125223613595706,7.60093521002997,7.563822139284458]]},
        "Montana": {"name":"Montana","data":[[59.56012378426172,66.90792795825618,66.58309745248687],[10.698496905393457,10.444369634741626,11.492114840274969],[18.33554376657825,13.070190203669416,12.381722604124546],[11.405835543766578,9.577512203332772,9.543065103113626]]},
        "Nebraska": {"name":"Nebraska","data":[[62.06989247311828,68.51435943995796,70.69690872507773],[8.629032258064516,8.931046017107086,9.721968172672398],[26.010752688172044,19.778276867205047,16.727638558624474],[3.2903225806451615,2.7763176757299184,2.8534845436253886]]},
        "Nevada": {"name":"Nevada","data":[[50.9825327510917,55.9402893197907,54.749139341949316],[10.414847161572052,11.461988304093568,13.208984705683166],[36.58140985651902,30.529393659587566,30.204864834358595],[2.0212102308172177,2.0683287165281627,1.837011118008917]]},
        "New Hampshire": {"name":"New Hampshire","data":[[61.97336460340062,68.40395688764211,69.90558060879368],[6.734232347767819,6.629263251144249,7.673337091319053],[25.337130412932407,18.78783404695113,16.840473506200677],[5.955272635899154,6.178945814262513,5.580608793686584]]},
        "New Jersey": {"name":"New Jersey","data":[[71.6899511866689,75.98149819494586,77.42721196329444],[2.7688941255680866,2.906419223826715,3.255636116460859],[23.664366268305,19.27177346570397,17.766511838676788],[1.8767884194580038,1.8403091155234659,1.5506400815679167]]},
        "New Mexico": {"name":"New Mexico","data":[[54.402295186483904,59.01687888658572,60.6058806058806],[12.623525661459995,13.443885105122892,14.463914463914465],[30.9467644246095,25.50784720165828,23.124443124443125],[2.027414727446605,2.0313888066331063,1.8057618057618057]]},
        "New York": {"name":"New York","data":[[70.26752325246908,76.1331004718803,78.10926463764629],[3.4106817528046793,3.363616517489798,3.7249308288508134],[24.328315274714736,18.622478966901205,16.27197580298682],[1.9934797200115064,1.8808040437286941,1.893828730516077]]},
        "North Carolina": {"name":"North Carolina","data":[[62.549253943273655,68.31824956891933,70.35466878337422],[11.753499544438002,11.006439419770285,11.997582623755232],[18.249695305936505,14.161852526571131,11.892047914561985],[7.447551206351837,6.513458484739257,5.755700678308559]]},
        "North Dakota": {"name":"North Dakota","data":[[64.76404036285803,70.82139446036294,72.20965309200604],[8.735093262664357,9.159503342884431,9.643665158371041],[22.96401997757619,16.542502387774594,14.630467571644044],[3.536846396901437,3.4765998089780323,3.516214177978884]]},
        "Ohio": {"name":"Ohio","data":[[61.298915093800375,66.63459981521875,67.24894840285815],[5.523990259851611,5.819657297431159,6.771550853217244],[29.29589701965178,23.694863271390336,21.7225987766573],[3.8811976266962374,3.850879615959767,4.256901967267317]]},
        "Oklahoma": {"name":"Oklahoma","data":[[53.77650640352719,59.7935146139305,60.38852138265164],[9.870354818391771,10.22490427027289,11.238703065312587],[30.16218769682973,24.45349231738646,23.05273455697382],[6.190951081251312,5.52808879841016,5.320040995061959]]},
        "Oregon": {"name":"Oregon","data":[[63.1065626336041,69.95566899516389,71.27642007926023],[7.647498931167165,8.400501522478955,9.346103038309113],[22.408080376229158,16.44501164248612,14.351469616908851],[6.837858058999573,5.198817839871038,5.026007265521796]]},
        "Pennsylvania": {"name":"Pennsylvania","data":[[63.99052571958189,70.20486088364389,70.70269180360923],[4.528088152000412,4.676518207256699,5.592572565049629],[27.004788630863498,20.93998296725408,18.910447350814323],[4.476597497554194,4.178637941845339,4.794288280526813]]},
        "Rhode Island": {"name":"Rhode Island","data":[[62.47551899725813,67.61252446183953,71.27612761276127],[4.713409061235148,5.001087192868015,5.775577557755775],[31.074552813683248,25.603392041748208,21.51815181518152],[1.7365191278234757,1.7829963035442487,1.4301430143014302]]},
        "South Carolina": {"name":"South Carolina","data":[[60.90725026730669,64.79252097362777,66.00164649419348],[10.485246945878927,11.068056130318649,12.180553852621253],[21.389084787405874,16.82216620894624,15.160007706994097],[7.218417999408514,7.3172566871073315,6.6577919461911685]]},
        "South Dakota": {"name":"South Dakota","data":[[59.08281389136242,62.07416340066325,63.578274760383394],[9.594835262689225,9.667370113556427,11.357312171493353],[18.800089047195012,15.57632398753894,12.161187261671648],[12.52226179875334,12.682142498241383,12.903225806451612]]},
        "Tennessee": {"name":"Tennessee","data":[[56.41055718475073,60.866604856000464,62.92555636678294],[9.747800586510264,10.039404299704467,10.675752413401476],[25.94218684541265,21.15373471634699,17.86052297125551],[7.899455383326351,7.9402561279480794,8.538168248560071]]},
        "Texas": {"name":"Texas","data":[[58.76923684002841,65.01403837154889,67.13322091062395],[8.944440059979481,9.025001671234708,10.043590314677527],[29.505169284192252,23.53299017313992,20.840943078048934],[2.781153815799858,2.427969784076476,1.982245696649591]]},
        "Utah": {"name":"Utah","data":[[54.79426147569772,63.65932047750229,65.6788452864231],[5.38459460189663,6.226405468829712,7.142534957149301],[34.341987950179664,25.540761146821755,22.255299954894],[5.479155972225975,4.57351290684624,4.923319801533603]]},
        "Vermont": {"name":"Vermont","data":[[74.59491898379676,77.24466396189804,77.88289896465548],[5.181036207241449,5.062621273593226,5.640842556229917],[8.761752350470093,7.144117128241312,7.550874687611567],[11.462292458491698,10.548597636267418,8.925383791503034]]},
        "Virginia": {"name":"Virginia","data":[[54.79105301914581,60.064736777818496,61.11009892076693],[17.854841678939618,18.018403159480478,19.092886921667183],[24.115196980854197,18.298318472374902,15.943069651794614],[3.238908321060383,3.618541590326127,3.8539445057712713]]},
        "Washington": {"name":"Washington","data":[[62.363457207207205,68.77474959235965,69.68021892955659],[11.061373873873874,11.151875145585837,12.20139774746781],[22.167792792792792,16.616585138597717,14.869329146632651],[4.407376126126126,3.45679012345679,3.249054176342961]]},
        "West Virginia": {"name":"West Virginia","data":[[64.94148046815626,67.67367489963938,67.34221980413493],[6.665146678826569,7.409675443968157,8.188248095756256],[17.30506155950752,13.247601551337008,12.023939064200217],[11.088311293509651,11.669048105055452,12.445593035908596]]},
        "Wisconsin": {"name":"Wisconsin","data":[[76.36322988435664,79.85790592750091,79.66579424199718],[4.11357031075341,4.523846566059914,5.078518220253674],[14.578379367111763,10.983768085878754,10.277833702436077],[4.944820437778184,4.6344794205604245,4.977853835313066]]},
        "Wyoming": {"name":"Wyoming","data":[[53.9448006690828,58.69949494949495,57.75305096913137],[11.388346807917479,11.376262626262626,13.16104331179708],[21.508224142737664,16.43939393939394,16.630772912179946],[13.158628380262058,13.484848484848486,12.455132806891601]]},
        "Puerto Rico": {"name":"Puerto Rico","data":[[39.066496163682864,41.83993889501825,40.336376741950986],[3.6800227337311737,5.0072137825681065,5.747236905333974],[39.869281045751634,32.44504795043707,32.54204709274388],[17.384200056834327,20.707799371976577,21.37433925997117]]}
      };

      //conventional_checkbox
      //fha_checkbox
      //va_checkbox
      //rhs_checkbox

      var $conventional_checkbox = $("#conventional_checkbox");
      $conventional_checkbox.click(function() {
          var series = originationsByTypeChart.series[0];
          if (series.visible) {
              series.hide();
              $conventional_checkbox.removeAttr("checked");

          } else {
              series.show();
              $conventional_checkbox.attr("checked");
          }
      });

      var $fha_checkbox = $("#fha_checkbox");
      $fha_checkbox.click(function() {
          var series = originationsByTypeChart.series[1];
          if (series.visible) {
              series.hide();
              $fha_checkbox.removeAttr("checked");

          } else {
              series.show();
              $fha_checkbox.attr("checked");
          }
      });

      var $va_checkbox = $("#va_checkbox");
      $va_checkbox.click(function() {
          var series = originationsByTypeChart.series[2];
          if (series.visible) {
              series.hide();
              $va_checkbox.removeAttr("checked");

          } else {
              series.show();
              $va_checkbox.attr("checked");
          }
      });

      var $rhs_checkbox = $("#rhs_checkbox");
      $rhs_checkbox.click(function() {
          var series = originationsByTypeChart.series[3];
          if (series.visible) {
              series.hide();
              $rhs_checkbox.removeAttr("checked");

          } else {
              series.show();
              $rhs_checkbox.attr("checked");
          }
      });


      var $msa = $('#hmda_chart_2_msa');
      $msa.change(function() {
          var msaID = $msa.val();
          var msaName = chart2DataObj[msaID].name.replace("&apos;", "’").toUpperCase();
          //console.log(msaName);
          // Update the chart name from the chart data object:
          originationsByTypeChart.setTitle({
              text: msaName
          });
          for (var i = 0; i < 4; i++) {
              originationsByTypeChart.series[i].setData(chart2DataObj[msaID].data[i]);
          }
      });

  });
