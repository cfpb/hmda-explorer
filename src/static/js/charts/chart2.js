  $(document).ready(function() {

      if ($('#hmda_chart_2').length !== 0) {
          var originationsByTypeChart = new Highcharts.Chart(chart2_options);
      }

      if ($('#hmda_chart_2_msa').length !== 0) {
          $('#hmda_chart_2_msa').chosen({
              width: '100%'
          });
      }

      var chart2DataObj = {
        "U.S. Total":{"name":"U.S. Total","data":[[60.95191810341459,61.57145218888256,63.948020298840426],[25.291430768100838,24.924406010956403,22.531788821749316],[10.150157283073591,10.282447016498928,10.295737221810512],[3.6064938454109754,3.221694783662106,3.22445365759975]]},
        "Alabama":{"name":"Alabama","data":[[53.5846609855502,52.316539769965985,54.24967049519864],[26.26667284179326,27.486635347480963,24.997175673131235],[12.956187476843276,13.354527782277662,13.500282432686877],[7.192478695813264,6.842297100275394,7.252871398983242]]},
        "Alaska":{"name":"Alaska","data":[[43.17463898916967,45.53268491291563,47.90911288373218],[24.582581227436823,22.415743044560056,19.4585448392555],[27.425541516245488,27.301515494232078,27.54411409233744],[4.8172382671480145,4.750056548292242,5.088228184674885]]},
        "Arizona":{"name":"Arizona","data":[[50.15122509317052,55.92146622177088,60.897482209298126],[35.00945864814962,29.88345664683979,24.906079543402086],[13.076722663374074,12.789786740171188,12.774988259942926],[1.762593595305792,1.405290391218144,1.4214499873568618]]},
        "Arkansas":{"name":"Arkansas","data":[[53.292264561584716,54.013350432409325,55.368635697444724],[25.257294625401162,24.69829995725231,22.47498884853119],[11.055369065623962,10.703363914373089,10.937997833428916],[10.395071747390165,10.584985695965274,11.21837762059517]]},
        "California":{"name":"California","data":[[64.24549378784661,65.75158142196514,70.15994366145208],[26.408138645423694,25.165101999783474,21.090975068962443],[8.47393658784797,8.44548927416985,8.11957795293025],[0.8724309788817114,0.637827304081538,0.6295033166552371]]},
        "Colorado":{"name":"Colorado","data":[[62.7475435438041,64.41419090739937,66.09254212216695],[22.63735548662777,21.266720420103784,19.0798472153271],[13.044704249181184,13.091029378320826,13.682738776709455],[1.5703967203869598,1.2280592941760218,1.1448718857964966]]},
        "Connecticut":{"name":"Connecticut","data":[[68.59083771420768,68.36704164672092,67.93617548984486],[24.29166382194306,24.560196266156055,24.94832860252983],[5.12732982863385,5.618717089516515,5.354534681841982],[1.9901686352154022,1.4540449976065102,1.7609612257833382]]},
        "Delaware":{"name":"Delaware","data":[[52.60109733793944,52.958231403461085,54.87310903529801],[29.54684007315586,30.18030261846516,28.61039927254691],[11.562690510058932,11.099030533659509,10.78779862775895],[6.289372078845763,5.762435444414242,5.728693064396132]]},
        "District of Columbia":{"name":"District of Columbia","data":[[84.84007594566964,87.92543426069764,89.16481505685532],[10.165035782094348,7.6825307160005645,6.077636910207816],[4.9948882722360155,4.392035023301793,4.744477846033198],[0,0,0.013070186903672723]]},
        "Florida":{"name":"Florida","data":[[56.71279770077068,56.38062938717564,59.08346485934454],[28.708331045087593,29.04645476772616,26.46625197289017],[13.005931132956231,13.108683650130137,13.08699285117445],[1.5729401211854943,1.4642321949680575,1.3632903165908457]]},
        "Georgia":{"name":"Georgia","data":[[53.02859018306469,52.853179007452034,55.04748505100247],[30.733535117788634,30.715871254162042,28.42741784599726],[12.859200641820436,13.11717139686063,13.24567246166396],[3.378674057326234,3.313778341525289,3.279424641336317]]},
        "Hawaii":{"name":"Hawaii","data":[[63.80407810982847,63.151028600100354,62.613362946511195],[6.171107994389901,6.783743100852986,6.588932074773274],[25.385694249649372,26.512794781736076,26.189154173607253],[4.6391196461322695,3.5524335173105865,4.6085508051082735]]},
        "Idaho":{"name":"Idaho","data":[[55.596486256729946,58.50234009360374,61.97718631178707],[27.531069100918913,25.606296979151892,21.079987442006487],[11.901388495324454,12.147213161253722,12.51264520179998],[4.971056147026677,3.74414976599064,4.43018104440646]]},
        "Illinois":{"name":"Illinois","data":[[70.0311002636584,69.54290177409158,71.31948488966545],[22.49667365946436,23.01855915498196,21.18035332945059],[5.079709730872522,5.390709264700413,5.289875392768035],[2.392516346004718,2.047829806226057,2.210286388115936]]},
        "Indiana":{"name":"Indiana","data":[[58.80016527383475,58.51019109045268,61.04112864118728],[27.983259359963746,28.221573643690174,25.604186167153475],[6.946832473642822,7.131961709845182,7.171292276115617],[6.2697428925586784,6.136273556011963,6.183392915543626]]},
        "Iowa":{"name":"Iowa","data":[[72.14075408055342,73.75500105285323,75.88761567843318],[15.833404796615499,14.887344704148243,12.491989028172986],[6.731841180001714,6.596125500105285,6.87277294983209],[5.293999942829374,4.761528742893241,4.747622343561742]]},
        "Kansas":{"name":"Kansas","data":[[63.10430876726002,64.45028166339641,64.59418636910083],[23.217434703044418,21.71656433951516,20.958046915939708],[10.154716353352187,10.427875181973542,10.517554945901791],[3.5235401763433707,3.405278815114881,3.930211769057674]]},
        "Kentucky":{"name":"Kentucky","data":[[58.56646331089128,58.08600064662141,59.17101017622238],[24.07943027975597,25.013471279232675,23.4921816827997],[8.827747125878036,9.169091496928548,9.185488541408123],[8.52635928347471,7.731436577217372,8.151319599569785]]},
        "Louisiana":{"name":"Louisiana","data":[[55.22120080436657,54.07379482588003,55.45392123203688],[25.301637460499855,26.348899674850383,25.354357741919664],[9.67394426888825,9.74506385184487,9.850899995095395],[9.803217466245332,9.83224164742472,9.34082103094806]]},
        "Maine":{"name":"Maine","data":[[59.149331980382215,59.476846942382465,59.9448275862069],[17.901234567901234,18.791092258748673,18.29655172413793],[9.58904109589041,9.862142099681867,10.793103448275861],[13.360392355826145,11.869918699186991,10.965517241379311]]},
        "Maryland":{"name":"Maryland","data":[[53.04881970798224,53.68330464716007,56.26938951684696],[31.01884607962951,30.91795754446357,28.251369068493894],[12.336785231877533,12.300631095811818,12.07747713723057],[3.595548980510709,3.098106712564544,3.401764277428579]]},
        "Massachusetts":{"name":"Massachusetts","data":[[77.98807363235676,77.5478206334274,78.60269678709433],[16.59930759962787,17.287687294640545,16.210446672251198],[4.16050267656972,4.135138451470407,4.192450077012457],[1.2521160914456526,1.0293536204616414,0.9944064636420136]]},
        "Michigan":{"name":"Michigan","data":[[62.70776372469954,65.16295162332204,69.57920398093307],[26.061684926926176,24.376819545345946,20.43914249093148],[5.62265190109955,5.765027564176305,5.593579572585847],[5.60789944727473,4.6952012671557135,4.388073955549599]]},
        "Minnesota":{"name":"Minnesota","data":[[66.01119304531377,68.69167264895908,71.41707531749026],[23.13460817397825,21.04912316685468,18.32516031686156],[6.200613812162368,6.1980822479745665,6.2919652961146735],[4.653584968545599,4.061121936211671,3.9657990695335092]]},
        "Mississippi":{"name":"Mississippi","data":[[50.876379008145165,49.08099551490634,49.35363054246707],[26.71409423651923,27.512971594406828,27.457613467037174],[11.135168574079803,11.960249758156714,12.049454311143329],[11.274358181255801,11.44578313253012,11.139301679352423]]},
        "Missouri":{"name":"Missouri","data":[[58.43087921697375,58.28672039005891,59.21033608033333],[25.574152769893992,25.582718223064944,24.081595100088062],[9.243207584799718,9.53883659511072,9.625014786483183],[6.751760428332541,6.591724791765423,7.0830540330954355]]},
        "Montana":{"name":"Montana","data":[[58.425306335274186,61.30678917815212,62.73592514921762],[18.727730946380465,17.54296409732857,16.56718825617035],[14.017554532023984,13.96120469627361,13.881271172769802],[8.82940818632137,7.189042028245704,6.815615421842233]]},
        "Nebraska":{"name":"Nebraska","data":[[62.449073014419774,63.379969892853985,67.19135387237097],[23.176928358892194,21.920658815195253,18.14431140409884],[11.311512932021058,11.737359426193217,11.56105654962106],[3.0624856946669716,2.9620118657575487,3.103278173909144]]},
        "Nevada":{"name":"Nevada","data":[[45.05007075214978,47.8197774860065,55.81613508442776],[38.0809839991292,36.02146822380393,28.281170049462734],[15.228039621203877,14.894156128348651,14.919836261299677],[1.6409056275171439,1.2645981618409232,0.9828586048098242]]},
        "New Hampshire":{"name":"New Hampshire","data":[[62.23771397018222,62.78998964866346,66.12680909717437],[24.378796245168417,24.313462826523775,21.38180565127498],[8.586416344561016,9.28575777872496,9.947162876177348],[4.797073440088349,3.6107897460878036,2.5442223753733058]]},
        "New Jersey":{"name":"New Jersey","data":[[69.83857869466725,69.04867748388531,69.66123077279198],[25.204804171593842,26.034180435158433,25.467297832201012],[3.852455512972118,4.113259736731619,3.983750188076527],[1.1041616207667868,0.8038823442246426,0.8877212069304754]]},
        "New Mexico":{"name":"New Mexico","data":[[50.816351583599314,50.0085329085841,52.47269009309584],[30.94770439479499,31.947209738892994,29.672281117150085],[16.431377363123005,16.696057796234143,16.267556368724104],[1.8045666584826907,1.3481995562887537,1.5874724210299735]]},
        "New York":{"name":"New York","data":[[72.63347763347764,72.79550028040774,75.22774070008734],[21.408730158730158,21.48913007620493,19.14624277919768],[4.351551226551226,4.377659749942269,4.409797056396369],[1.6062409812409812,1.3377098934450566,1.2162194643186206]]},
        "North Carolina":{"name":"North Carolina","data":[[64.28888612586368,65.79074591020382,67.05070831604529],[17.18502992948365,16.448076353258582,14.938355758401991],[13.200056839375476,13.28150585593313,13.512832671448047],[5.326027105277181,4.479671880604464,4.498103254104676]]},
        "North Dakota":{"name":"North Dakota","data":[[63.75219683655536,65.7461127871896,64.54729810330431],[21.188488576449913,19.958226966813648,19.27710843373494],[11.083040421792619,10.733348804827106,11.415960873195754],[3.9762741652021085,3.562311441169645,4.759632589765]]},
        "Ohio":{"name":"Ohio","data":[[61.733947057474914,61.73036093418259,64.34267503706927],[26.697000158721764,26.77578993380792,24.215643603797666],[7.58160943865404,7.802547770700636,7.878604572246362],[3.9874433451492863,3.6913013613088546,3.5630767868866973]]},
        "Oklahoma":{"name":"Oklahoma","data":[[51.929260450160776,50.868310598111236,51.62850198285788],[30.260504659654476,30.50367261280168,29.00345401048996],[13.10153141860592,13.751311647429171,13.841627222719714],[4.708703471578833,4.876705141657922,5.526416783932455]]},
        "Oregon":{"name":"Oregon","data":[[64.0493968983343,66.46547996540791,69.0519473365284],[21.35554279149914,19.83820985874892,17.45166088249876],[10.45184759716638,9.957840876333238,10.220532877944875],[4.1432127130001914,3.738469299509945,3.2758589030279657]]},
        "Pennsylvania":{"name":"Pennsylvania","data":[[63.479239296847624,62.43635566645311,64.51813857156726],[26.051869477800526,27.18666756583606,25.18688715575548],[6.482762437053843,6.742927470748896,6.604155205333161],[3.9861287882980094,3.6340492969619316,3.690819067344099]]},
        "Rhode Island":{"name":"Rhode Island","data":[[58.29533116178067,58.21949632933742,59.74663908996898],[33.51791530944625,34.36483598178608,33.43674594967253],[6.883821932681868,6.6629495400055765,6.282316442605998],[1.3029315960912053,0.7527181488709228,0.5342985177524991]]},
        "South Carolina":{"name":"South Carolina","data":[[57.934556136216145,57.349921307052384,58.926548140273326],[22.23930047477542,23.38304729071423,21.650883352683632],[13.905113228814429,14.079292512928127,14.519716319993286],[5.921030160194009,5.187738889305254,4.902852187049756]]},
        "South Dakota":{"name":"South Dakota","data":[[56.863774813570004,59.589041095890416,60.15805705474171],[19.567272345341877,18.593875906526993,17.039321511179644],[12.204600357105345,12.439564867042707,12.307247494217425],[11.364352483982774,9.377518130539887,10.495373939861217]]},
        "Tennessee":{"name":"Tennessee","data":[[54.521583022962936,55.0763225425587,56.83546906050846],[25.248519600225073,25.536426394226712,23.980675666415404],[11.786929610674955,12.059805067286725,12.06400328924827],[8.442967766137027,7.3274459959278575,7.119851983827862]]},
        "Texas":{"name":"Texas","data":[[58.71357831999282,59.07730256818736,60.759189881623975],[27.720878194990227,27.47857702634994,25.94766271248777],[12.056189009440804,12.21045261251076,12.14460700282382],[1.5093544755761514,1.233667792951938,1.1485404030644366]]},
        "Utah":{"name":"Utah","data":[[54.933851460507356,57.87814313346228,62.65101631835098],[32.648561323844035,30.597678916827853,26.30021948659223],[7.926909138540802,8.059961315280464,7.391926710563985],[4.490678077107803,3.4642166344294005,3.6568374844927947]]},
        "Vermont":{"name":"Vermont","data":[[73.256054647071,71.28917245261775,73.97677517608984],[11.426205754502174,13.285794708200413,12.183514182371978],[7.017180707927966,8.725839744792644,8.071578145821436],[8.300558890498861,6.699193094389192,5.768132495716733]]},
        "Virginia":{"name":"Virginia","data":[[53.49870496325465,53.243284639390396,55.95170416091394],[22.602076270294173,22.79967835193659,20.109730456518406],[20.404725304807428,20.556757481189333,20.432785583439365],[3.494493461643749,3.400279527483678,3.5057797991282924]]},
        "Washington":{"name":"Washington","data":[[63.27944329983601,64.77439887500115,68.22711388762278],[20.70386410461254,19.830880108059098,16.79759766201035],[13.513854433839297,13.58047534901794,13.278101009017703],[2.5028381617121473,1.814245667921805,1.69718744134917]]},
        "West Virginia":{"name":"West Virginia","data":[[60.647244330980634,59.017106407654396,59.39339997261399],[17.157230815437753,18.411133661930997,18.11584280432699],[10.211743505030785,10.321832415192809,10.776393263042586],[11.983781348550833,12.249927515221803,11.714363960016431]]},
        "Wisconsin":{"name":"Wisconsin","data":[[75.58796257270505,76.12991526596645,77.27131691316617],[14.116159487482088,13.977270979746875,12.734740916948626],[6.256427547837815,6.425023451796946,6.576439473412036],[4.039450391975048,3.467790302489735,3.417502696473161]]},
        "Wyoming":{"name":"Wyoming","data":[[47.92358803986711,49.26515615431721,49.853458382180534],[25.152270210409743,23.025107164727494,23.036342321219227],[15.83610188261351,17.238211879975506,17.482415005861665],[11.088039867109636,10.471524800979793,9.62778429073857]]},
        "Puerto Rico":{"name":"Puerto Rico","data":[[27.027305512622355,22.47344620885477,20.224325271643885],[51.7671303451829,50.60469029340625,48.662226895665384],[6.666666666666667,6.9723419917972445,7.033531954667602],[14.538897475528078,19.94952150594174,24.079915878023133]]}
      };

      //conventional_checkbox
      //fha_checkbox
      //va_checkbox
      //rhs_checkbox

      var $conventional_checkbox = $("#conventional_checkbox");
      $conventional_checkbox.click(function() {
          var series = originationsByTypeChart.series[0];
          if (series.visible) {
              series.hide();
              $conventional_checkbox.removeAttr("checked");

          } else {
              series.show();
              $conventional_checkbox.attr("checked");
          }
      });

      var $fha_checkbox = $("#fha_checkbox");
      $fha_checkbox.click(function() {
          var series = originationsByTypeChart.series[1];
          if (series.visible) {
              series.hide();
              $fha_checkbox.removeAttr("checked");

          } else {
              series.show();
              $fha_checkbox.attr("checked");
          }
      });

      var $va_checkbox = $("#va_checkbox");
      $va_checkbox.click(function() {
          var series = originationsByTypeChart.series[2];
          if (series.visible) {
              series.hide();
              $va_checkbox.removeAttr("checked");

          } else {
              series.show();
              $va_checkbox.attr("checked");
          }
      });

      var $rhs_checkbox = $("#rhs_checkbox");
      $rhs_checkbox.click(function() {
          var series = originationsByTypeChart.series[3];
          if (series.visible) {
              series.hide();
              $rhs_checkbox.removeAttr("checked");

          } else {
              series.show();
              $rhs_checkbox.attr("checked");
          }
      });


      var $msa = $('#hmda_chart_2_msa');
      $msa.change(function() {
          var msaID = $msa.val();
          var msaName = chart2DataObj[msaID].name.replace("&apos;", "’").toUpperCase();
          //console.log(msaName);
          // Update the chart name from the chart data object:
          originationsByTypeChart.setTitle({
              text: msaName
          });
          for (var i = 0; i < 4; i++) {
              originationsByTypeChart.series[i].setData(chart2DataObj[msaID].data[i]);
          }
      });

  });
