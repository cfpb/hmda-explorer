<!DOCTYPE html>

<html>
<head>
  <title>summary-table.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="app.html">
                app.js
              </a>
            
              
              <a class="source" href="dom.html">
                dom.js
              </a>
            
              
              <a class="source" href="form.html">
                form.js
              </a>
            
              
              <a class="source" href="ie8.html">
                ie8.js
              </a>
            
              
              <a class="source" href="observer.html">
                observer.js
              </a>
            
              
              <a class="source" href="preview.html">
                preview.js
              </a>
            
              
              <a class="source" href="query.html">
                query.js
              </a>
            
              
              <a class="source" href="summary-table.html">
                summary-table.js
              </a>
            
              
              <a class="source" href="utils.html">
                utils.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>summary-table.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>@TODO: </p>
<ul>
<li>refactor to use tidy tables. I didn’t realize it was in use when I wrote this</li>
<li>move table.queryParams.clauses properties from arrays to objects. this will create a nicer branch in logic dealing with
the calculate by values vs. the three variables
[8/19/13 TS]</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> PDP = (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( pdp )</span> </span>{
<span class="hljs-pi">
  'use strict'</span>;

  <span class="hljs-keyword">var</span> table = {};

  table.$el = $(<span class="hljs-string">'#summary-table-form'</span>);
  table.$page = $(<span class="hljs-string">'#summary'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>cache input fields</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table._inputs = {};
  table._inputs.all = $(<span class="hljs-string">'*[data-summary-table-input]'</span>);
  table._inputs.varFields = [$(<span class="hljs-string">'#variable0'</span>), $(<span class="hljs-string">'#variable1'</span>), $(<span class="hljs-string">'#variable2'</span>)];
  table._inputs.calculate = $(<span class="hljs-string">'#calculate-by'</span>);

  table.genericError = <span class="hljs-string">'Sorry, something went awry when we tried to load your data. Please try again?'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>avert your eyes
we could call the api every time
or we can just do this
this is a subset of all available dimensions anyway</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.fields = [<span class="hljs-string">'action_taken_name'</span>,<span class="hljs-string">'agency_name'</span>,<span class="hljs-string">'applicant_ethnicity_name'</span>,<span class="hljs-string">'applicant_sex_name'</span>,<span class="hljs-string">'applicant_race_name_1'</span>,<span class="hljs-string">'co_applicant_ethnicity_name'</span>,<span class="hljs-string">'co_applicant_race_name_1'</span>,<span class="hljs-string">'co_applicant_sex_name'</span>,<span class="hljs-string">'county_name'</span>,<span class="hljs-string">'denial_reason_name_1'</span>,<span class="hljs-string">'hoepa_status_name'</span>,<span class="hljs-string">'lien_status_name'</span>,<span class="hljs-string">'loan_purpose_name'</span>,<span class="hljs-string">'loan_type_name'</span>,<span class="hljs-string">'msamd_name'</span>,<span class="hljs-string">'owner_occupancy_name'</span>,<span class="hljs-string">'preapproval_name'</span>,<span class="hljs-string">'property_type_name'</span>,<span class="hljs-string">'purchaser_type_name'</span>, <span class="hljs-string">'respondent_id'</span>, <span class="hljs-string">'state_name'</span>, <span class="hljs-string">'as_of_year'</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>map for select clause statements and calculate by field values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.metrics = {
    <span class="hljs-string">'count'</span>: {
      <span class="hljs-string">'api'</span>: <span class="hljs-string">'COUNT()'</span>,
      <span class="hljs-string">'human'</span>: <span class="hljs-string">'Number of records'</span>
    },
    <span class="hljs-string">'min_applicant_income_000s'</span>: {
      <span class="hljs-string">'api'</span>: <span class="hljs-string">'MIN(applicant_income_000s)'</span>,
      <span class="hljs-string">'human'</span>: <span class="hljs-string">'Applicant Income Minimum'</span>
    },
    <span class="hljs-string">'max_applicant_income_000s'</span>: {
      <span class="hljs-string">'api'</span>: <span class="hljs-string">'MAX(applicant_income_000s)'</span>,
      <span class="hljs-string">'human'</span>: <span class="hljs-string">'Applicant Income Maximum'</span>
    },
    <span class="hljs-string">'avg_applicant_income_000s'</span>: {
      <span class="hljs-string">'api'</span>: <span class="hljs-string">'AVG(applicant_income_000s)'</span>,
      <span class="hljs-string">'human'</span>: <span class="hljs-string">'Applicant Income Average'</span>
    },
    <span class="hljs-string">'min_loan_amount_000s'</span>: {
      <span class="hljs-string">'api'</span>: <span class="hljs-string">'MIN(loan_amount_000s)'</span>,
      <span class="hljs-string">'human'</span>: <span class="hljs-string">'Loan Amount Minimum'</span>
    },
    <span class="hljs-string">'max_loan_amount_000s'</span>: {
      <span class="hljs-string">'api'</span>: <span class="hljs-string">'MAX(loan_amount_000s)'</span>,
      <span class="hljs-string">'human'</span>: <span class="hljs-string">'Loan Amount Maximum'</span>
    },
    <span class="hljs-string">'avg_loan_amount_000s'</span>: {
      <span class="hljs-string">'api'</span>: <span class="hljs-string">'AVG(loan_amount_000s)'</span>,
      <span class="hljs-string">'human'</span>: <span class="hljs-string">'Loan Amount Average'</span>
    },
    <span class="hljs-string">'sum_loan_amount_000s'</span>: {
      <span class="hljs-string">'api'</span>: <span class="hljs-string">'SUM(loan_amount_000s)'</span>,
      <span class="hljs-string">'human'</span>: <span class="hljs-string">'Loan Amount Sum Total'</span>
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>stores user-selected variables and calculate-by value
these are used in clause generation on submit</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.fieldVals = {
    variables: [],
    calculate: <span class="hljs-string">''</span>
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>holds onto user-selected options. consists of clauses object + pdp.query.params</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.queryParams = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>clauses = { select|group: [‘var_name_0’, ‘var_name_1’, ‘var_name_2’, ‘calculate-by’] }</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.queryParams.clauses = {};
    
  table._lastRequestTime = <span class="hljs-string">''</span>;
  
  table._lastTimeout = <span class="hljs-string">''</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>returns a templated option tag</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.optionTmpl = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(field, defaultOp)</span> </span>{
    <span class="hljs-keyword">var</span> def = (defaultOp) ? <span class="hljs-string">'selected'</span> : <span class="hljs-string">''</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;option value="'</span> + field + <span class="hljs-string">'"'</span> + def + <span class="hljs-string">'&gt;'</span> + pdp.utils.varToTitle( field ) + <span class="hljs-string">'&lt;/option&gt;'</span>;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>fetches field names and populates select options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table._populateOptions = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    table._populateFields(table._inputs.varFields, table.fields, table.optionTmpl);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>populates variable and calculate by fields
inputs param: array or jQObjs or single jQObj
fields param: array of field values
tmpl: function that returns string of html</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table._populateFields = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inputs, fields, tmpl)</span> </span>{
    <span class="hljs-keyword">var</span> inputsLen = inputs.length,
        fieldsLen = fields.length - <span class="hljs-number">1</span>,
        i,
        domField,
        first = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">while</span> (inputsLen--) {
      domField = inputs[inputsLen];

      <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;=fieldsLen; i++) {
        domField.append(tmpl(fields[i]), first);

        first = <span class="hljs-literal">false</span>;
      }
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>inits chosen library to make pretty form fields</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table._chosenInit = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'select'</span>).chosen({
      width: <span class="hljs-string">'100%'</span>,
      disable_search_threshold: <span class="hljs-number">10</span>
    });
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>event handler, called when a form field changes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.updateFieldVals = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    <span class="hljs-keyword">var</span> value = e.target.value,
        position = e.target.id.substr( -<span class="hljs-number">1</span>, <span class="hljs-number">1</span> ),
        removedVal;</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>if they’ve selected a placeholder, ignore it
a placeholder has no value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> ($(e.target).find(<span class="hljs-string">'option[value='</span> + value + <span class="hljs-string">']'</span>).attr(<span class="hljs-string">'placeholder'</span>)) {
      value = <span class="hljs-string">''</span>;
    }

    <span class="hljs-keyword">if</span> ( e.target.id === <span class="hljs-string">'calculate-by'</span> ) {
      <span class="hljs-keyword">this</span>.fieldVals.calculate = value;
    } <span class="hljs-keyword">else</span> {
      removedVal = <span class="hljs-keyword">this</span>.fieldVals.variables[position];
      <span class="hljs-keyword">this</span>.fieldVals.variables[position] = value;
      <span class="hljs-keyword">this</span>._updateFields( value );
      <span class="hljs-keyword">if</span> (_.indexOf(<span class="hljs-keyword">this</span>.fieldVals.variables, removedVal) === -<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">this</span>._updateFields( removedVal );
      }
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>hide variables already selected from subsequent drop downs
or
show variables that are unselected due to column reset</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table._updateFields = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span> </span>{
    <span class="hljs-keyword">var</span> i;
    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;=<span class="hljs-number">2</span>; i++) {
        $(<span class="hljs-string">'#variable'</span> + i)
          .find(<span class="hljs-string">'option[value='</span> + value + <span class="hljs-string">']'</span>)
          .toggleClass(<span class="hljs-string">'hidden'</span>)
          .trigger(<span class="hljs-string">'liszt:updated'</span>);
    }
   
  };
  
  table._showSpinner = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">this</span>.$page.addClass(<span class="hljs-string">'loading'</span>);
  };

  table._removeSpinner = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">this</span>.$page.removeClass(<span class="hljs-string">'loading'</span>);
  };

  table._requestData = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> check, responseJSON, itvl = <span class="hljs-number">10</span>;
    
    <span class="hljs-keyword">this</span>._lastRequestTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime();
    
    responseJSON = pdp.utils.getJSON( pdp.query.generateApiUrl( <span class="hljs-string">'jsonp?$callback='</span>, <span class="hljs-literal">true</span>, <span class="hljs-keyword">this</span>.queryParams ) + <span class="hljs-string">'&amp;$limit=0'</span> );
    responseJSON.timestamp = <span class="hljs-keyword">this</span>._lastRequestTime;
    
    responseJSON.done(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( response )</span></span>{
      table.cancelTimeout();
      <span class="hljs-keyword">if</span> (responseJSON.timestamp === table._lastRequestTime) {
        <span class="hljs-keyword">if</span> (response.computing) {</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>the response isn’t ready yet
keep checking the API for completion</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          table._lastTimeout = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            table._requestData();
          }, itvl * <span class="hljs-number">1000</span>);
        } <span class="hljs-keyword">else</span> {
          table._handleApiResponse( response );
          table._removeSpinner();
        }
      }
    });
  };
  
  <span class="hljs-comment">/**
   * This function performs output formatting of numbers in 1000s to a 
   * US dollar format.; i.e.,"23.52323423" to "$23,523".
   * The method includes multipling the original number by 1000, rounding to 
   * the nearest whole dollar, and then adding comma separators and '$'.
   *
   * The implementation should be something like :
   *    ```amount = Math.round( the_number * 1000 ).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");```
   *    All non numerical values of ``the_number``` should be emitted as blanks; e.g., null and ""
   *    are represented as nothing on the screen.
   *  
   */</span>
  table._mungeDollarAmts = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( respData )</span> </span>{
    <span class="hljs-keyword">var</span> record, column, variable, amount, addCommas, dotIndex, amtParts, num;</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>for row in results</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">for</span> ( record <span class="hljs-keyword">in</span> respData.results ) {
      <span class="hljs-keyword">if</span> ( respData.results.hasOwnProperty( record ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>for variable in row</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">for</span> ( column <span class="hljs-keyword">in</span> respData.results[record] ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>if this is a calculate by field value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.metrics.hasOwnProperty( column ) ) {

            num = respData.results[record][column];
            
            <span class="hljs-keyword">if</span> ( num === <span class="hljs-literal">null</span> || num === <span class="hljs-string">''</span> || <span class="hljs-built_in">isNaN</span>(num) ) {
              respData.results[record][column] = <span class="hljs-string">'Data not available'</span>;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (num &lt; <span class="hljs-number">0</span>) {
              respData.results[record][column] = <span class="hljs-string">'Data format error. A negative number was found in original data: '</span> + num;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>We don’t want to add a dollar sign if it’s a record count.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( column === <span class="hljs-string">'count'</span> ) {
              respData.results[record][column] = pdp.utils.commify( num );
            }
            <span class="hljs-keyword">else</span> {
              respData.results[record][column] = <span class="hljs-string">'$'</span> + <span class="hljs-built_in">Math</span>.round( num*<span class="hljs-number">1000</span> ).toString().replace(<span class="hljs-regexp">/\B(?=(\d{3})+(?!\d))/g</span>, <span class="hljs-string">','</span>);
            }
          }
        }
      }
    }

    <span class="hljs-keyword">return</span> respData;
  };

  table._handleApiResponse = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( response )</span> </span>{
    <span class="hljs-keyword">this</span>.resetTable();
    <span class="hljs-keyword">this</span>.updateTableHeaders();
    <span class="hljs-keyword">this</span>.populateTable(<span class="hljs-keyword">this</span>._prepData(response));
  };

  table._prepData = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( respData )</span> </span>{
    respData = <span class="hljs-keyword">this</span>._mungeDollarAmts( respData );

    <span class="hljs-keyword">return</span> respData;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>removes table contents
resets table headers to current choices</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.resetTable = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> $table = $(<span class="hljs-string">'table#summary-table'</span>);
    $table.empty();
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>takes query for calculate by field and
returns the value representation
ex. AVG(applicant_income_000s) to avg_applicant_income_000s</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.queryToVal = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( qstr )</span> </span>{
    <span class="hljs-keyword">var</span> val, i;</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>split on parentheses</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    val = qstr.split(<span class="hljs-regexp">/\(|\)/</span>);

    i = val.length;
    <span class="hljs-keyword">while</span> (i--) {
      <span class="hljs-keyword">if</span> ( val[i] === <span class="hljs-string">''</span> ) {
        val.splice(i, <span class="hljs-number">1</span>);
      }
    }

    val = val.join(<span class="hljs-string">'_'</span>).toLowerCase();

    <span class="hljs-keyword">return</span> val;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>builds out table body from API JSON response data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.populateTable = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( responseData )</span> </span>{
    <span class="hljs-keyword">var</span> total, result, column, i, $tr, cellValue,
        $table = $(<span class="hljs-string">'table#summary-table'</span>),
        len = responseData.results.length - <span class="hljs-number">1</span>,
        clauses, clauseLen = <span class="hljs-keyword">this</span>.queryParams.clauses.select.length;

    <span class="hljs-keyword">this</span>._removeSpinner();
    <span class="hljs-keyword">this</span>._enableTable();

    <span class="hljs-keyword">if</span> ( !_.isEmpty(responseData.errors) ) {
      <span class="hljs-keyword">this</span>._throwFetchError();
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> ( responseData.total === <span class="hljs-number">0</span> ) {
      <span class="hljs-keyword">this</span>._disableTable();
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;=len; i++) {
      $tr = $(<span class="hljs-string">'&lt;tr&gt;&lt;/tr&gt;'</span>);

      <span class="hljs-keyword">for</span> ( column=<span class="hljs-number">0</span>; column&lt;clauseLen; column++ ) {

        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.queryParams.clauses.select[column] !== <span class="hljs-string">'undefined'</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>reads like
cellValue = response data object -&gt; iteration we’re on -&gt; object key that matches the 
select clause array item for the inner interation we’re on</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          cellValue = responseData.results[i][<span class="hljs-keyword">this</span>.queryParams.clauses.select[column]];</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>the column value won’t match on calculate fields w/o some manipulation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> cellValue === <span class="hljs-string">'undefined'</span> ) {
            cellValue = responseData.results[i][<span class="hljs-keyword">this</span>.queryToVal( <span class="hljs-keyword">this</span>.queryParams.clauses.select[column] )];</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>if it’s still undefined, gtfo</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> cellValue === <span class="hljs-string">'undefined'</span> ) {
              cellValue = <span class="hljs-string">'&lt;em class="not-reported"&gt;not reported&lt;/em&gt;'</span>;
            }
          }
          $tr.append(<span class="hljs-string">'&lt;td&gt;'</span> + cellValue + <span class="hljs-string">'&lt;/td&gt;'</span>);
        }
      }

      $table.append($tr);
    }

  };

  table._throwFetchError = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
      pdp.utils.showError( <span class="hljs-keyword">this</span>.genericError );
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>remove value from variables array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.resetColumn = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( clause, position )</span> </span>{
    <span class="hljs-keyword">var</span> removedVal = <span class="hljs-keyword">this</span>.fieldVals.variables[position];
    <span class="hljs-keyword">this</span>.fieldVals.variables[position] = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>._updateFields(removedVal);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>create structure of table</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.createTable = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    $(<span class="hljs-string">'#summary-table-container'</span>).append(<span class="hljs-string">'&lt;table id="summary-table"&gt;&lt;/table&gt;'</span>);
    <span class="hljs-keyword">this</span>.$table = $(<span class="hljs-string">'table#summary-table'</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$table;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>generates <tr> of column headers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.updateTableHeaders = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> $table = $(<span class="hljs-string">'table#summary-table'</span>),
        $headerRow = $(<span class="hljs-string">'&lt;tr class="header"&gt;&lt;/tr&gt;'</span>),
        columns = <span class="hljs-keyword">this</span>.queryParams.clauses.select.slice(<span class="hljs-number">0</span>),
        i, val, fieldVal,
        len = columns.length;

    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;=len; i++) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> columns[i] !== <span class="hljs-string">'undefined'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>3 = array index of calculate by
calculate by = 3d vs. 2d since it has value id, 
query representation and human representation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> ( i === (len-<span class="hljs-number">1</span>) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>walk the calculate by or metrics map for the correct title</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          fieldVal = <span class="hljs-keyword">this</span>.queryToVal( columns[i] );
          <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.metrics.hasOwnProperty( fieldVal ) ) {
            columns[i] = <span class="hljs-keyword">this</span>.metrics[fieldVal].human;
          }
        }
        $headerRow.append(<span class="hljs-string">'&lt;td id="'</span> + fieldVal + <span class="hljs-string">'"&gt;'</span> + pdp.utils.varToTitle( columns[i] ) + <span class="hljs-string">'&lt;/td&gt;'</span>);
      }
    }

    $table.prepend($headerRow);
  };
  
  table.cancelTimeout = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
    clearTimeout(<span class="hljs-keyword">this</span>._lastTimeout);
  };
  
  table._buildQueryArrays = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(vals)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>build arrays for select and group clauses
add filters as where clause</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.queryParams.clauses = {
      group: vals.variables,
      select: vals.variables.concat([<span class="hljs-keyword">this</span>.metrics[vals.calculate].api]),
      where: pdp.query.params
    };
  };
  
  table._updateShareLink = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(vals)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>add a select value consisting of variables + calculate-by to query.params</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    vals = vals.variables.concat(vals.calculate);
    pdp.query.params.select = {
      comparator: <span class="hljs-string">'='</span>,
      values: vals
    };
    pdp.form.updateShareLink();
  };
  
  table._prepFieldVals = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>extract non-empty values from fieldVals.variables
ensure that there is a value for calculate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> {
      variables: pdp.utils.nonEmptyValues(<span class="hljs-keyword">this</span>.fieldVals.variables),
      calculate: <span class="hljs-keyword">this</span>.fieldVals.calculate || <span class="hljs-string">'count'</span>
    };
  };

  table._disableTable = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
    pdp.form.disableField( $(<span class="hljs-string">'#summary .instructions'</span>) );
    pdp.form.disableField( $(<span class="hljs-string">'#summary .drop-downs'</span>) );
    pdp.form.disableField( $(<span class="hljs-string">'#download-summary .action'</span>) );
    $(<span class="hljs-string">'#summary-table'</span>).hide();
  };

  table._enableTable = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
    pdp.form.enableField( $(<span class="hljs-string">'#summary .instructions'</span>) );
    pdp.form.enableField( $(<span class="hljs-string">'#summary .drop-downs'</span>) );
    pdp.form.enableField( $(<span class="hljs-string">'#download-summary .action'</span>) );
    $(<span class="hljs-string">'#summary-table'</span>).show();
  };
  
  table.setupTable = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> queryVals = <span class="hljs-keyword">this</span>._prepFieldVals();
        
    <span class="hljs-keyword">this</span>.cancelTimeout();
    <span class="hljs-keyword">this</span>.resetTable();
    
    <span class="hljs-keyword">if</span> (queryVals.variables.length &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">this</span>._showSpinner();
      <span class="hljs-keyword">this</span>._buildQueryArrays(queryVals);
      <span class="hljs-keyword">this</span>._updateShareLink(queryVals);
      <span class="hljs-keyword">this</span>._requestData();
      <span class="hljs-keyword">this</span>.enableDownload();
    }
  };
  
  table._extractValuesFromUrlParams = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(vals)</span> </span>{
    _.each(vals, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(param, ind)</span> </span>{
      <span class="hljs-keyword">if</span> (table.metrics[param]) {</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>this is the calculate by value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        table.fieldVals.calculate = param;
      } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>perform some basic validation on the variable params
they should be unique, in the field options list, and not exceed 3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (_.indexOf(table.fields, param) !== -<span class="hljs-number">1</span> &amp;&amp; _.indexOf(table.fieldVals.variables, param) === -<span class="hljs-number">1</span> &amp;&amp; table.fieldVals.variables.length &lt; <span class="hljs-number">3</span>) {
          table.fieldVals.variables.push(param);
        }
      }
    });
  };
  
  table._updateSummaryFields = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>update variable &amp; calculate-by select values to match fieldVals</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> i, val;
    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">3</span>; i++) {
      <span class="hljs-keyword">if</span> (table.fieldVals.variables[i]) {
        val = table.fieldVals.variables[i];
        table._inputs.varFields[i].val(val).trigger(<span class="hljs-string">'liszt:updated'</span>);
        table._updateFields(val);
      }
    }
    <span class="hljs-keyword">if</span> (table.fieldVals.calculate) {
      table._inputs.calculate.val(table.fieldVals.calculate).trigger(<span class="hljs-string">'liszt:updated'</span>);
    }
  };
  
  table._updateSummaryFieldsUI = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>conditionally display reset links based on number of variables chosen</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> reset_fields,
        num = table.fieldVals.variables.length;
    <span class="hljs-keyword">if</span> (num &gt; <span class="hljs-number">1</span>) {
      reset_fields = (num === <span class="hljs-number">2</span>) ? $(<span class="hljs-string">'#reset-variable1'</span>) : $(<span class="hljs-string">'#reset-variable1, #reset-variable2'</span>);
      reset_fields.removeClass(<span class="hljs-string">'hidden'</span>);
    } <span class="hljs-keyword">else</span> {
      $(<span class="hljs-string">'#variable2'</span>).attr(<span class="hljs-string">'disabled'</span>, <span class="hljs-string">'disabled'</span>).trigger(<span class="hljs-string">'liszt:updated'</span>);
    }
  };
  
  table.showTableFromUrlParams = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(params)</span> </span>{
    <span class="hljs-keyword">this</span>._extractValuesFromUrlParams(params);
    <span class="hljs-keyword">this</span>._updateSummaryFields();
    <span class="hljs-keyword">this</span>._updateSummaryFieldsUI();
    <span class="hljs-keyword">this</span>.setupTable();
  };

  table.init = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> selectParams;
    
    table._populateOptions();
    table._chosenInit();
    table.createTable();
    table.disableDownload();
    table.$page.find(<span class="hljs-string">'.share_url'</span>).tooltip({ title: <span class="hljs-string">'Copied to clipboard!'</span>, trigger: <span class="hljs-string">'manual'</span> });
    table.$page.initTooltips({ placement: <span class="hljs-string">'right'</span> });

    $(<span class="hljs-string">'#calculate-by option'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
      <span class="hljs-keyword">var</span> short = $( <span class="hljs-keyword">this</span> ).text();
      $( <span class="hljs-keyword">this</span> ).attr( <span class="hljs-string">'data-abbr'</span>, short );
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>check for select values in params </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    selectParams = ((pdp.query.params.select || {}).values || []);
    
    <span class="hljs-keyword">if</span> (selectParams.length &gt; <span class="hljs-number">0</span>) {
        table.showTableFromUrlParams(selectParams);
    } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>fields should be disabled until a first variable is selected
we don’t want users selecting subsequent vars when earlier
ones are undefined</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $(<span class="hljs-string">'#variable1, #variable2, #calculate-by'</span>).attr(<span class="hljs-string">'disabled'</span>, <span class="hljs-string">'disabled'</span>).trigger(<span class="hljs-string">'liszt:updated'</span>);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>event listener for form changes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._inputs.all.on(<span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
      <span class="hljs-keyword">this</span>.updateFieldVals(e);

      <span class="hljs-keyword">if</span> (e.target.id !== <span class="hljs-string">'calculate-by'</span>) {
        <span class="hljs-keyword">var</span> position = e.target.id.substr( -<span class="hljs-number">1</span>, <span class="hljs-number">1</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>enable subsequent variable field and calculate-by field</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $(<span class="hljs-string">'#calculate-by, #variable'</span>.concat(++position)).removeAttr(<span class="hljs-string">'disabled'</span>).trigger(<span class="hljs-string">'liszt:updated'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>if this is variable 1 or 2, they’re eligible to be removed, show link</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (position &gt; <span class="hljs-number">0</span>) {
          $(<span class="hljs-string">'#reset-'</span> + e.target.id).removeClass(<span class="hljs-string">'hidden'</span>);
        }
      } <span class="hljs-keyword">else</span> {

        <span class="hljs-keyword">var</span> val = $(<span class="hljs-string">'#calculate-by'</span>).val(),
            long = $( <span class="hljs-string">'#calculate-by option[value='</span> + $(<span class="hljs-string">'#calculate-by'</span>).val() + <span class="hljs-string">']'</span> ).attr(<span class="hljs-string">'data-verbose'</span>) || val;

        $(<span class="hljs-string">'#calculate-by option'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
          <span class="hljs-keyword">var</span> short = $( <span class="hljs-keyword">this</span> ).attr(<span class="hljs-string">'data-abbr'</span>);
          $( <span class="hljs-keyword">this</span> ).text( short );
        });
        
        $( <span class="hljs-string">'#calculate-by option[value='</span> + val + <span class="hljs-string">']'</span> ).text( long );
        $(<span class="hljs-string">'#calculate-by'</span>).trigger(<span class="hljs-string">'liszt:updated'</span>);

      }

    }.bind(<span class="hljs-keyword">this</span>));

    $(<span class="hljs-string">'.reset-field'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
      e.preventDefault();
      <span class="hljs-keyword">var</span> position = e.target.id.substr( -<span class="hljs-number">1</span>, <span class="hljs-number">1</span> ),
          clause = e.target.getAttribute(<span class="hljs-string">'data-summary-table-input'</span>);

      <span class="hljs-keyword">this</span>.resetColumn( clause, position );
      $(e.target).addClass(<span class="hljs-string">'hidden'</span>);
      $(<span class="hljs-string">'#variable'</span> + position)
        .find(<span class="hljs-string">'option:first-child'</span>)
        .prop(<span class="hljs-string">'selected'</span>, <span class="hljs-literal">true</span>)
        .end()
        .trigger(<span class="hljs-string">'liszt:updated'</span>);

      $(<span class="hljs-string">'#variable'</span>.concat(++position)).attr(<span class="hljs-string">'disabled'</span>, <span class="hljs-string">'disabled'</span>).trigger(<span class="hljs-string">'liszt:updated'</span>);

    }.bind( <span class="hljs-keyword">this</span> ));
    
    $(<span class="hljs-string">'#summary-submit'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
      e.preventDefault();
      track( <span class="hljs-string">'Page Interaction'</span>, <span class="hljs-string">'Click Submit'</span>, <span class="hljs-string">'Generate Summary Table'</span> );
      <span class="hljs-keyword">this</span>.setupTable();
    }.bind(<span class="hljs-keyword">this</span>));
    
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>The <code>disableDownload</code> method disables the summary table download block.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.disableDownload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

    <span class="hljs-keyword">var</span> $el = $(<span class="hljs-string">'#download-summary'</span>);

    $el.addClass(<span class="hljs-string">'disabled'</span>).find(<span class="hljs-string">'select, input'</span>).attr(<span class="hljs-string">'disabled'</span>, <span class="hljs-string">'disabled'</span>);

  };</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>The <code>enableDownload</code> method enables the summary table download block.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  table.enableDownload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

    <span class="hljs-keyword">var</span> $el = $(<span class="hljs-string">'#download-summary'</span>);

    $el.removeClass(<span class="hljs-string">'disabled'</span>).find(<span class="hljs-string">'select, input'</span>).removeAttr(<span class="hljs-string">'disabled'</span>);

  };

  pdp.summaryTable = table;

  <span class="hljs-keyword">return</span> pdp;

}( PDP || {} ));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
