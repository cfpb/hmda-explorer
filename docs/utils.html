<!DOCTYPE html>

<html>
<head>
  <title>utils.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="app.html">
                app.js
              </a>
            
              
              <a class="source" href="dom.html">
                dom.js
              </a>
            
              
              <a class="source" href="form.html">
                form.js
              </a>
            
              
              <a class="source" href="ie8.html">
                ie8.js
              </a>
            
              
              <a class="source" href="observer.html">
                observer.js
              </a>
            
              
              <a class="source" href="preview.html">
                preview.js
              </a>
            
              
              <a class="source" href="query.html">
                query.js
              </a>
            
              
              <a class="source" href="summary-table.html">
                summary-table.js
              </a>
            
              
              <a class="source" href="utils.html">
                utils.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>utils.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> PDP = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( pdp )</span> </span>{
<span class="hljs-pi">
  'use strict'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="utils">Utils</h2>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>An assortment of helper methods and polyfills.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> utils = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Error visualization</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  utils.showError = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( errorText )</span> </span>{
    $(<span class="hljs-string">'#error'</span>).text( errorText ).delay( <span class="hljs-number">20000</span> ).fadeOut();
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>takes a variable name and returns a nice title
ex. state_name becomes State</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  utils.varToTitle = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( varName )</span> </span>{
    <span class="hljs-keyword">var</span> nameParts = varName.split(<span class="hljs-string">'_'</span>),
        varTitle;

    nameParts = nameParts.reverse();</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>a varName can have both ‘name’ and an int on the end</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">isNaN</span>(nameParts[<span class="hljs-number">0</span>]) === <span class="hljs-literal">false</span> ) {
      nameParts.splice(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
    }

    <span class="hljs-keyword">if</span> ( nameParts[<span class="hljs-number">0</span>] === <span class="hljs-string">'name'</span> ) {
      nameParts.splice(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
    }

    <span class="hljs-keyword">if</span> ( nameParts[<span class="hljs-number">0</span>] === <span class="hljs-string">'year'</span> ) {
      nameParts.splice(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
    }

    varTitle = nameParts.reverse().join(<span class="hljs-string">' '</span>);
    varTitle = varTitle.charAt(<span class="hljs-number">0</span>).toUpperCase() + varTitle.slice(<span class="hljs-number">1</span>);

    <span class="hljs-keyword">return</span> varTitle;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>When given a number of bytes, this’ll return a string with proper units.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  utils.getPrettyFilesize = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( bytes )</span> </span>{
    <span class="hljs-keyword">if</span> (bytes&gt;=<span class="hljs-number">1073741824</span>) {
      bytes = ( bytes/<span class="hljs-number">1073741824</span> ).toFixed( <span class="hljs-number">1</span> ) + <span class="hljs-string">' GB'</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( bytes&gt;=<span class="hljs-number">1048576</span> ) {
      bytes = ( bytes/<span class="hljs-number">1048576</span> ).toFixed( <span class="hljs-number">1</span> ) + <span class="hljs-string">' MB'</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( bytes &gt;= <span class="hljs-number">1024</span> ) {
      bytes = ( bytes/<span class="hljs-number">1024</span> ).toFixed( <span class="hljs-number">0</span> ) + <span class="hljs-string">' KB'</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( bytes &gt; <span class="hljs-number">1</span> ) {
      bytes = bytes + <span class="hljs-string">' bytes'</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( bytes == <span class="hljs-number">1</span> ) {
      bytes = bytes + <span class="hljs-string">' byte'</span>;
    } <span class="hljs-keyword">else</span> {
      bytes = <span class="hljs-string">'0 byte'</span>;
    }
    <span class="hljs-keyword">return</span> bytes;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Return the hash parameters from the current URL. <a href="http://goo.gl/mebsOI">source</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  utils.getHashParams = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

    <span class="hljs-keyword">var</span> hashParams = {};
    <span class="hljs-keyword">var</span> e,
        a = <span class="hljs-regexp">/\+/g</span>,  <span class="hljs-comment">// Regex for replacing addition symbol with a space</span>
        r = <span class="hljs-regexp">/([^!&amp;;=&lt;&gt;]+)(!?[=&gt;&lt;]?)([^&amp;;]*)/g</span>,
        d = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(s)</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">decodeURIComponent</span>(s.replace(a, <span class="hljs-string">' '</span>)); },
        q = <span class="hljs-built_in">window</span>.location.hash.substring(<span class="hljs-number">1</span>).replace(<span class="hljs-regexp">/^!\/?/</span>, <span class="hljs-string">''</span>);

    <span class="hljs-keyword">while</span> (e = r.exec(q)) {
      hashParams[d(e[<span class="hljs-number">1</span>])] = {
        values: d(e[<span class="hljs-number">3</span>]),
        comparator: d(e[<span class="hljs-number">2</span>])
      };
    }

    <span class="hljs-keyword">return</span> hashParams;

  };</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Sanitize strings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  utils.sanitize = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( string )</span> </span>{

    <span class="hljs-keyword">var</span> tagBody = <span class="hljs-string">'(?:[^"\'&gt;]|"[^"]*"|\'[^\']*\')*'</span>,
        tagOrComment = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'&lt;(?:!--(?:(?:-*[^-&gt;])*--+|-?)|script\\b'</span> + tagBody + <span class="hljs-string">'&gt;[\\s\\S]*?&lt;/script\\s*|style\\b'</span> + tagBody + <span class="hljs-string">'&gt;[\\s\\S]*?&lt;/style\\s*|/?[a-z]'</span> + tagBody + <span class="hljs-string">')&gt;'</span>, <span class="hljs-string">'gi'</span>);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeTags</span><span class="hljs-params">( html )</span> </span>{
      <span class="hljs-keyword">var</span> oldHtml;
      <span class="hljs-keyword">do</span> {
        oldHtml = html;
        html = html.replace(tagOrComment, <span class="hljs-string">''</span>);
      } <span class="hljs-keyword">while</span> (html !== oldHtml);
      <span class="hljs-keyword">return</span> html.replace(<span class="hljs-regexp">/&lt;/g</span>, <span class="hljs-string">'&amp;lt;'</span>);
    }

    <span class="hljs-keyword">return</span> removeTags( string );

  };</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Add commas to a number to make it pretty.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  utils.commify = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( num )</span> </span>{
    <span class="hljs-keyword">return</span> num.toString().replace(<span class="hljs-regexp">/\B(?=(\d{3})+(?!\d))/g</span>, <span class="hljs-string">','</span>);
  };
  
  utils.isBlank = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(str)</span> </span>{
      <span class="hljs-keyword">return</span> (!str || <span class="hljs-regexp">/^\s*$/</span>.test(str));
  };
  
  utils.emptyObject = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(obj)</span> </span>{
    <span class="hljs-keyword">if</span> (_.isObject(obj)) {
      <span class="hljs-keyword">return</span> !_.some(obj, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(val, key)</span> </span>{
          <span class="hljs-keyword">return</span> !pdp.utils.isBlank(val);
      });
    } 
  };
  
  utils.nonEmptyValues = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(obj)</span> </span>{
    <span class="hljs-keyword">if</span> (!_.isObject(obj)) {
      <span class="hljs-keyword">return</span> [];
    }
    <span class="hljs-keyword">return</span> _.filter(obj, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(val, key)</span> </span>{
        <span class="hljs-keyword">return</span> !pdp.utils.isBlank(val);
    });
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>localStorage polyfill from <a href="https://gist.github.com/juliocesar/926500">https://gist.github.com/juliocesar/926500</a>.
Basically just creates an object in memory.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> ( !(<span class="hljs-string">'localStorage'</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">window</span>) ) {
    <span class="hljs-built_in">window</span>.localStorage = {
      _data       : {},
      setItem     : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id, val)</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._data[id] = <span class="hljs-built_in">String</span>(val); },
      getItem     : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id)</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._data.hasOwnProperty(id) ? <span class="hljs-keyword">this</span>._data[id] : <span class="hljs-literal">undefined</span>; },
      removeItem  : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id)</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._data[id]; },
      clear       : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._data = {}; }
    };
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Cache AJAX requests in localStorage.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  utils.getJSON = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( url )</span> </span>{

    <span class="hljs-keyword">var</span> supportsLocalStorage = <span class="hljs-string">'localStorage'</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">window</span>,
        keyPrefix = <span class="hljs-string">'cfpb'</span>,
        storageKey = keyPrefix + <span class="hljs-string">':'</span> + url.substring( url.indexOf(<span class="hljs-string">'?'</span>) + <span class="hljs-number">1</span> );

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getJSON</span><span class="hljs-params">( url )</span> </span>{

      <span class="hljs-keyword">var</span> deferred = url.indexOf(<span class="hljs-string">'jsonp'</span>) !== -<span class="hljs-number">1</span> ? $.jsonp({ url: url }) : $.getJSON( url );

      deferred.done(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>if the request returns a status of ‘computing’
results are not ready and should not be cached</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (data &amp;&amp; data.computing) {
          <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-keyword">try</span> {
          localStorage.setItem( storageKey, <span class="hljs-built_in">JSON</span>.stringify(data) );
        } <span class="hljs-keyword">catch</span>( e ) {
          clearStorage();
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>This is a safety to prevent the polyfill object from growing too huge.
@TODO: Make this less lame.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.localStorage.length &gt; <span class="hljs-number">100</span> ) {
          clearStorage();
        }
      });

      <span class="hljs-keyword">return</span> deferred;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getStorage</span><span class="hljs-params">( url )</span> </span>{

      <span class="hljs-keyword">var</span> storageDfd = <span class="hljs-keyword">new</span> $.Deferred(),
          storedData = localStorage.getItem( storageKey ),
          promise;

      <span class="hljs-keyword">if</span> (!storedData) {
        <span class="hljs-keyword">return</span> getJSON( url );
      }

      setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        storageDfd.resolveWith( <span class="hljs-literal">null</span>, [ <span class="hljs-built_in">JSON</span>.parse(storedData) ] );
      });
      
      promise = storageDfd.promise();
      promise.status = <span class="hljs-number">200</span>;
      promise.statusText = <span class="hljs-string">'success'</span>;

      <span class="hljs-keyword">return</span> promise;

    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearStorage</span><span class="hljs-params">()</span> </span>{

      _.keys( localStorage ).forEach( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key )</span></span>{
        <span class="hljs-keyword">if</span> ( key.indexOf( keyPrefix ) !== -<span class="hljs-number">1</span> ) {
          localStorage.removeItem(key);
        }
      });

    }

    <span class="hljs-built_in">window</span>.clearStorage = clearStorage;</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Both functions return a promise, so no matter which function
gets called, the API is the same.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> supportsLocalStorage ? getStorage( url ) : getJSON( url );

  };</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Pass a keypress event and its default action will be prevented if a 
non-numeric key was pressed. Numbers, commas, tab, delete, backspace,
meta, A (for selecting all), V (for pasting) and arrow keys are allowed to be pressed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  utils.requireNumeric = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e )</span> </span>{

      <span class="hljs-keyword">var</span> key = e.which,
          allowedKeys = [ <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">17</span>, <span class="hljs-number">18</span>, <span class="hljs-number">36</span>, <span class="hljs-number">37</span>, <span class="hljs-number">38</span>, <span class="hljs-number">39</span>, <span class="hljs-number">40</span>, <span class="hljs-number">46</span>, <span class="hljs-number">48</span>, <span class="hljs-number">49</span>, <span class="hljs-number">50</span>, <span class="hljs-number">51</span>, <span class="hljs-number">52</span>, <span class="hljs-number">53</span>,
                          <span class="hljs-number">54</span>, <span class="hljs-number">55</span>, <span class="hljs-number">56</span>, <span class="hljs-number">57</span>, <span class="hljs-number">65</span>, <span class="hljs-number">86</span>, <span class="hljs-number">91</span>, <span class="hljs-number">93</span>, <span class="hljs-number">96</span>, <span class="hljs-number">97</span>, <span class="hljs-number">98</span>, <span class="hljs-number">99</span>, <span class="hljs-number">100</span>, <span class="hljs-number">101</span>, <span class="hljs-number">102</span>,
                          <span class="hljs-number">103</span>, <span class="hljs-number">104</span>, <span class="hljs-number">105</span>, <span class="hljs-number">188</span>, <span class="hljs-number">189</span>, <span class="hljs-number">224</span> ];

      <span class="hljs-keyword">if</span> ( allowedKeys.indexOf( key ) === -<span class="hljs-number">1</span> ) {
        e.preventDefault();
        $( <span class="hljs-keyword">this</span> ).tooltip( { title: <span class="hljs-string">'Numbers only, please!'</span>, trigger: <span class="hljs-string">'manual'</span> } );
        $( <span class="hljs-keyword">this</span> ).tooltip( <span class="hljs-string">'show'</span> );
        setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
          $( <span class="hljs-keyword">this</span> ).tooltip(<span class="hljs-string">'destroy'</span>);
        }.bind( <span class="hljs-keyword">this</span> ), <span class="hljs-number">3000</span>);
      }

  };</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>A <code>bind()</code> polyfill</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Function</span>.prototype.bind) {
    <span class="hljs-built_in">Function</span>.prototype.bind = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(oThis)</span> </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span> !== <span class="hljs-string">'function'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>closest thing possible to the ECMAScript 5 internal IsCallable function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Function.prototype.bind - what is trying to be bound is not callable'</span>);
      }

      <span class="hljs-keyword">var</span> aArgs = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>),
          fToBind = <span class="hljs-keyword">this</span>,
          FNOP = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{},
          fBound = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">return</span> fToBind.apply(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> FNOP &amp;&amp; oThis ? <span class="hljs-keyword">this</span> : oThis, aArgs.concat(<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>)));
          };

      FNOP.prototype = <span class="hljs-keyword">this</span>.prototype;
      fBound.prototype = <span class="hljs-keyword">new</span> FNOP();

      <span class="hljs-keyword">return</span> fBound;
    };
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>A <code>splice()</code> polyfill.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-built_in">String</span>.prototype.splice = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( idx, rem, s )</span> </span>{
      <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.slice(<span class="hljs-number">0</span>,idx) + s + <span class="hljs-keyword">this</span>.slice(idx + <span class="hljs-built_in">Math</span>.abs(rem)));
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>A <code>indexOf()</code> polyfill.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Array</span>.prototype.indexOf) {
    <span class="hljs-built_in">Array</span>.prototype.indexOf = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(searchElement <span class="hljs-comment">/*, fromIndex */</span> )</span> </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> === <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>();
      }
      <span class="hljs-keyword">var</span> n, k, t = <span class="hljs-built_in">Object</span>(<span class="hljs-keyword">this</span>),
          len = t.length &gt;&gt;&gt; <span class="hljs-number">0</span>;

      <span class="hljs-keyword">if</span> (len === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
      }
      n = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span>) {
        n = <span class="hljs-built_in">Number</span>(<span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>]);
        <span class="hljs-keyword">if</span> (n != n) { <span class="hljs-comment">// shortcut for verifying if it's NaN</span>
          n = <span class="hljs-number">0</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n !== <span class="hljs-number">0</span> &amp;&amp; n != <span class="hljs-literal">Infinity</span> &amp;&amp; n != -<span class="hljs-literal">Infinity</span>) {
          n = (n &gt; <span class="hljs-number">0</span> || -<span class="hljs-number">1</span>) * <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.abs(n));
        }
      }
      <span class="hljs-keyword">if</span> (n &gt;= len) {
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
      }
      <span class="hljs-keyword">for</span> (k = n &gt;= <span class="hljs-number">0</span> ? n : <span class="hljs-built_in">Math</span>.max(len - <span class="hljs-built_in">Math</span>.abs(n), <span class="hljs-number">0</span>); k &lt; len; k++) {
        <span class="hljs-keyword">if</span> (k <span class="hljs-keyword">in</span> t &amp;&amp; t[k] === searchElement) {
          <span class="hljs-keyword">return</span> k;
        }
      }
      <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    };
  }

  $.fn.initTooltips = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span></span>{

    <span class="hljs-keyword">var</span> settings = $.extend({
        placement: <span class="hljs-string">'top'</span>,
        container: <span class="hljs-literal">false</span>
    }, options );

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.find(<span class="hljs-string">'.help'</span>).tooltip({
      placement: settings.placement,
      container: settings.container,
      title: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTooltipTitle</span><span class="hljs-params">()</span></span>{
        <span class="hljs-keyword">return</span> $( <span class="hljs-keyword">this</span> ).attr(<span class="hljs-string">'title'</span>) || $( <span class="hljs-keyword">this</span> ).next(<span class="hljs-string">'.help-text'</span>).html();
      }
    });
  };

  pdp.utils = utils;

  <span class="hljs-keyword">return</span> pdp;

}( PDP || {} ));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
